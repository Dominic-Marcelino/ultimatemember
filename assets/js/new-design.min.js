function controlFromSlider(e,r){var[t,o]=getParsed(e,r);fillSlider(e,r,"#eaecf0","#7f56d9",r),o<t&&(e.value=o)}function controlToSlider(e,r){var[t,o]=getParsed(e,r);fillSlider(e,r,"#eaecf0","#7f56d9",r),setToggleAccessible(r),r.value=t<=o?o:t}function getParsed(e,r){return[parseInt(e.value,10),parseInt(r.value,10)]}function fillSlider(e,r,t,o,a){var n=r.max-r.min,e=e.value-r.min,r=r.value-r.min;a.style.background=`linear-gradient(
      to right,
      ${t} 0%,
      ${t} ${e/n*100}%,
      ${o} ${e/n*100}%,
      ${o} ${r/n*100}%,
      ${t} ${r/n*100}%,
      ${t} 100%)`}function setToggleAccessible(e){var r=document.querySelector("#toSlider");Number(e.value)<=0?r.style.zIndex=2:r.style.zIndex=0}"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.profile&&(UM.profile={}),UM.profile={avatarModal:null,avatarCropper:null},jQuery(document).ready(function(n){n(document.body).on("click",".um-modal-avatar-decline",function(e){e.preventDefault();e=n(this);let r=e.siblings(".um-ajax-spinner-svg"),t=e.parents(".um-modal-buttons-wrapper").find(".um-button");var o=e.data("user_id"),e=e.data("nonce");t.prop("disabled",!0),r.show(),wp.ajax.send("um_decline_profile_photo_change",{data:{user_id:o,nonce:e},success:function(){r.hide(),UM.frontend.cropper.obj&&UM.frontend.cropper.destroy(),UM.modal.close()},error:function(e){t.prop("disabled",!1),r.hide(),console.log(e)}})}),n(document.body).on("click",".um-apply-avatar-crop",function(r){r.preventDefault();r=n(this);if(0<r.parents(".um-modal-body").find(".cropper-hidden").length&&UM.frontend.cropper.obj){let e=r.siblings(".um-ajax-spinner-svg");var o=r.parents(".um-modal-buttons-wrapper").find(".um-button");let t=r.data("user_id");var r=r.data("nonce"),a=UM.frontend.cropper.obj.getData(),a=Math.round(a.x)+","+Math.round(a.y)+","+Math.round(a.width)+","+Math.round(a.height);a&&(o.prop("disabled",!0),e.show(),wp.ajax.send("um_apply_profile_photo_change",{data:{coord:a,user_id:t,nonce:r},success:function(r){n('[data-um-modal-opened="1"]').siblings(".um-avatar").find("> img").replaceWith(r.avatar),r.all_sizes&&n.each(r.all_sizes,function(e){n(".um-avatar-"+e+'[data-user_id="'+t+'"]').find("> img").replaceWith(r.all_sizes[e])}),e.hide(),UM.frontend.cropper.obj&&UM.frontend.cropper.destroy(),UM.modal.close()},error:function(e){console.log(e)}}))}})}),wp.hooks.addAction("um-modal-shown","ultimate-member",function(e){e.find(".um-profile-photo-crop-wrapper").length&&UM.frontend.cropper.init()},10,1),wp.hooks.addAction("um-modal-before-close","ultimate-member",function(e){e.find(".um-modal-avatar-decline:not(:disabled)").length&&e.find(".um-modal-avatar-decline").trigger("click"),UM.frontend.cropper.obj&&UM.frontend.cropper.destroy()});const fromSlider=document.querySelector("#fromSlider"),toSlider=document.querySelector("#toSlider"),controlSlider=document.querySelector(".sliders_control");if(fromSlider&&toSlider&&(fillSlider(fromSlider,toSlider,"#eaecf0","#7f56d9",toSlider),setToggleAccessible(toSlider),fromSlider.oninput=()=>controlFromSlider(fromSlider,toSlider),toSlider.oninput=()=>controlToSlider(fromSlider,toSlider)),controlSlider){controlSlider.addEventListener("mouseover",function(){fillSlider(fromSlider,toSlider,"#d0d5dd","#6941c6",toSlider)}),controlSlider.addEventListener("mouseout",function(){fillSlider(fromSlider,toSlider,"#eaecf0","#7f56d9",toSlider)});const S=controlSlider.closest("form");S.addEventListener("reset",function(){setTimeout(function(){fillSlider(fromSlider,toSlider,"#eaecf0","#7f56d9",toSlider)},1)})}jQuery(document).ready(function(s){s(".js-choice").each(function(){s(this).attr("multiple")?new Choices(s(this)[0],{removeItemButton:!0}):s(this).hasClass("um-no-search")?new Choices(s(this)[0],{searchEnabled:!1}):new Choices(s(this)[0])}),s(document.body).on("dragover",".um-uploader-dropzone",function(e){let r=e.target;e.target.classList.contains("um-uploader-dropzone")||(r=r.closest(".um-uploader-dropzone")),s(r).attr("drop-active",!0),e.preventDefault()}),s(document.body).on("dragleave",".um-uploader-dropzone",function(e){e.preventDefault();let r=e.target;e.target.classList.contains("um-uploader-dropzone")||(r=r.closest(".um-uploader-dropzone")),s(r).removeAttr("drop-active")}),s(document.body).on("drop",".um-uploader-dropzone",function(e){e.preventDefault();let r=e.target;e.target.classList.contains("um-uploader-dropzone")||(r=r.closest(".um-uploader-dropzone")),s(r).removeAttr("drop-active")}),jQuery(document.body).on("click",".um-toggle-password",function(){var e=jQuery(this).closest(".um-field-area-password").find("input");"text"===e.attr("type")?e.attr("type","password"):e.attr("type","text"),jQuery(this).toggleClass("um-icon-eye um-icon-eye-disabled")}),jQuery(document.body).on("keydown","#single_user_password-export-request",function(e){var r;jQuery(this).hasClass("um-error")&&(r=jQuery(this).parents("form").find("#um_account_request_download_data").data("hint"),jQuery(this).parents(".um-field").find(".um-field-hint").removeClass("um-field-error").removeAttr("id").html(r),jQuery(this).removeClass("um-error").removeAttr("aria-errormessage"))}),jQuery(document.body).on("keydown","#single_user_password-erase-request",function(e){var r;jQuery(this).hasClass("um-error")&&(r=jQuery(this).parents("form").find("#um_account_request_erase_data").data("hint"),jQuery(this).parents(".um-field").find(".um-field-hint").removeClass("um-field-error").removeAttr("id").html(r),jQuery(this).removeClass("um-error").removeAttr("aria-errormessage"))}),jQuery(document.body).on("click","#um_account_request_download_data",function(e){e.preventDefault();e={nonce:jQuery(this).data("nonce")};let o=jQuery(this).siblings(".um-ajax-spinner-svg"),a=(o.show(),jQuery(this).parents("form").find("#single_user_password-export-request"));var r="um-error-for-single_user_password-export-request",t=a.parents(".um-field");if(a.length){if(""===a.val())return t.find(".um-field-hint").data("hint",t.find(".um-field-hint").html()).addClass("um-field-error").attr("id",r).html(jQuery(this).data("error")),a.addClass("um-error").attr("aria-errormessage",r),void o.hide();e.password=a.val()}wp.ajax.send("um_personal_data_export",{data:e,success:function(e){a.parents(".um-form-new").find(".um-form-submit").remove(),a.parents(".um-form-col").html('<p class="um-supporting-text">'+e+"</p>"),o.hide()},error:function(e){var r,t;e["single_user_password-export-request"]&&(r="um-error-for-single_user_password-export-request",(t=a.parents(".um-field")).find(".um-field-hint").data("hint",t.find(".um-field-hint").html()).addClass("um-field-error").attr("id",r).html(e["single_user_password-export-request"]),a.addClass("um-error").attr("aria-errormessage",r)),o.hide()}})}),jQuery(document.body).on("click","#um_account_request_erase_data",function(e){e.preventDefault();e={nonce:jQuery(this).data("nonce")};let o=jQuery(this).siblings(".um-ajax-spinner-svg"),a=(o.show(),jQuery(this).parents("form").find("#single_user_password-erase-request"));var r="um-error-for-single_user_password-erase-request",t=a.parents(".um-field");if(a.length){if(""===a.val())return t.find(".um-field-hint").data("hint",t.find(".um-field-hint").html()).addClass("um-field-error").attr("id",r).html(jQuery(this).data("error")),a.addClass("um-error").attr("aria-errormessage",r),void o.hide();e.password=a.val()}wp.ajax.send("um_personal_data_erase",{data:e,success:function(e){a.parents(".um-form-new").find(".um-form-submit").remove(),a.parents(".um-form-col").html('<p class="um-supporting-text">'+e+"</p>"),o.hide()},error:function(e){var r,t;e["single_user_password-erase-request"]&&(r="um-error-for-single_user_password-erase-request",(t=a.parents(".um-field")).find(".um-field-hint").data("hint",t.find(".um-field-hint").html()).addClass("um-field-error").attr("id",r).html(e["single_user_password-erase-request"]),a.addClass("um-error").attr("aria-errormessage",r)),o.hide()}})}),s("#um-indeterminate").prop("indeterminate",!0),s(".um-uploader-button").each(function(){let n=jQuery(this),d=n.parents(".um-uploader");var e=d.find(".um-uploader-dropzone");let l=d.find(".um-uploader-filelist");var r=n.data("mime-types"),t=parseInt(n.data("max-size")),o=n.data("multiple"),a=n.data("handler"),i=n.data("nonce"),r={prevent_duplicates:!0,mime_types:r};0!==t&&(r.max_file_size=plupload.formatSize(t));let u={browse_button:n.get(0),url:wp.ajax.settings.url+"?action=um_upload&handler="+a+"&nonce="+i,chunk_size:"1024kb",max_retries:1,multi_selection:o,filters:r,init:{Error:function(t,o){if(wp.hooks.doAction("um_uploader_error",d,t,o),void 0!==o.file&&l.length){l.removeClass("um-display-none");let r=l.find("#"+o.file.id);if(r.length)r.addClass("um-upload-failed");else{t=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file um-upload-failed").removeClass("um-uploader-file-placeholder um-display-none").attr("id",o.file.id);l.append(t),(r=l.find("#"+o.file.id)).find(".um-uploader-file-name").text(o.file.name);let e=o.file.name.split(".").pop();""===o.file.type&&(e="file"),r.find(".um-file-extension-text").text(e)}r.find(".um-supporting-text").text(o.message),r.find(".um-progress-bar-wrapper").remove()}},FileFiltered:function(t,r){if(wp.hooks.doAction("um_uploader_file_filtered",d,t,r),l.length){l.removeClass("um-display-none"),t.getOption("multi_selection")||l.find(".um-uploader-file").each(function(e,r){t.removeFile(r.id)});var o=l.find("#"+r.id);if(!o.length){var a=d.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file").removeClass("um-uploader-file-placeholder um-display-none").attr("id",r.id);l.append(a),(o=l.find("#"+r.id)).find(".um-uploader-file-name").text(r.name);let e=r.name.split(".").pop();""===r.type&&(e="file"),o.find(".um-file-extension-text").text(e),o.find(".um-supporting-text").text(plupload.formatSize(r.size))}}},FilesAdded:function(e,r){wp.hooks.doAction("um_uploader_files_added",d,e,r),r.length&&e.start()},FilesRemoved:function(e,r){wp.hooks.doAction("um_uploader_files_removed",d,e,r),r.length&&s.each(r,function(e,r){jQuery("#"+r.id).remove()})},FileUploaded:function(e,r,t){var o,a;200===t.status&&t.response?(a=JSON.parse(t.response))?a.info&&0===a.OK?null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,n,e,r,a)&&l.length&&((o=l.find("#"+r.id)).find(".um-supporting-text").text(a.info),o.addClass("um-upload-failed"),o.find(".um-progress-bar-wrapper").remove()):a.data&&null===wp.hooks.applyFilters("um_uploader_file_uploaded",null,n,e,r,a)&&l.length&&((o=l.find("#"+r.id)).data("filename",a.data[0].name_saved).data("nonce",a.data[0].delete_nonce),o.find(".um-progress-bar-wrapper").remove(),o.addClass("um-upload-completed")):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,n,e,r,a)&&l.length&&((o=l.find("#"+r.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded. Wrong file upload server response.","ultimate-member")),o.addClass("um-upload-failed"),o.find(".um-progress-bar-wrapper").remove()):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,n,e,r,null)&&l.length&&((a=l.find("#"+r.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded, Status Code ","ultimate-member")+t.status),a.addClass("um-upload-failed"),a.find(".um-progress-bar-wrapper").remove())},PostInit:function(e){},UploadProgress:function(e,r){wp.hooks.doAction("um_uploader_upload_progress",d,e,r);e=jQuery("#"+r.id).find(".um-progress-bar");e.length&&UM.frontend.progressBar.set(e,r.percent)},UploadComplete:function(e,r){wp.hooks.doAction("um_uploader_upload_complete",d,e,r)}}};e.length&&(u.drop_element=e.get(0)),(u=wp.hooks.applyFilters("um_uploader_data",u,a,n)).url&&(t=new plupload.Uploader(u),UM.frontend.uploaders[t.id]=t,d.data("plupload",t.id),t.init())}),s(document.body).on("click",".um-upload-link",function(e){e.preventDefault(),s(this).parents(".um-uploader").find(".um-uploader-button").trigger("click")}),s(document.body).on("click",".um-uploader-file-remove",function(){if(!confirm(wp.i18n.__("Are you sure that you want to delete this file?","ultimate-member")))return!1;function e(){var e=t.attr("id");UM.frontend.uploaders[r.data("plupload")].removeFile(e),t.remove()}let r=s(this).parents(".um-uploader"),t=s(this).parents(".um-uploader-file");var o,a;t.hasClass("um-upload-failed")?e():(o=t.data("filename"),a=t.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:o,nonce:a},success:function(){e()},error:function(e){alert(e),console.log(e)}}))})}),wp.hooks.addFilter("um_uploader_data","ultimate-member",function(e,r,t){return"upload-avatar"===r&&(r=t.data("user_id"),e.url+="&user_id="+r),e}),wp.hooks.addAction("um_uploader_error","ultimate-member",function(e,r,t){e=e.find(".um-uploader-button");"upload-avatar"===e.data("handler")&&void 0!==t&&(e.parents(".um-profile-photo-uploader").removeClass("um-processing"),alert(t.message))}),wp.hooks.addAction("um_uploader_files_added","ultimate-member",function(e,r,t){e=e.find(".um-uploader-button");"upload-avatar"===e.data("handler")&&t.length&&e.parents(".um-profile-photo-uploader").addClass("um-processing")}),wp.hooks.addAction("um_uploader_upload_complete","ultimate-member",function(e,r,t){e=e.find(".um-uploader-button");"upload-avatar"===e.data("handler")&&t.length&&(jQuery.each(t,function(e){t[e]&&r.removeFile(t[e].id)}),e.parents(".um-profile-photo-uploader").removeClass("um-processing"))}),wp.hooks.addFilter("um_uploader_file_uploaded","ultimate-member",function(e,r,t,o,a){var n,d;return"upload-avatar"!==r.data("handler")?e:(e=r.data("user_id"),n=r.data("apply_nonce"),d=r.data("decline_nonce"),a={classes:"um-profile-photo-modal",duration:400,footer:"",header:wp.i18n.__("Change your profile photo","ultimate-member"),size:"normal",content:'<div class="um-profile-photo-crop-wrapper" data-crop="square" data-ratio="1" data-min_width="256" data-min_height="256"><img src="'+a.data[0].url+'" class="um-profile-photo-crop fusion-lazyload-ignore" alt="" /></div><div class="um-modal-buttons-wrapper"><button type="button" class="um-button um-button-primary um-button-size-m um-apply-avatar-crop" data-user_id="'+e+'" data-nonce="'+n+'">'+wp.i18n.__("Apply","ultimate-member")+'</button><button type="button" class="um-button um-button-size-m um-modal-avatar-decline" data-user_id="'+e+'" data-nonce="'+d+'">'+wp.i18n.__("Cancel","ultimate-member")+'</button><span class="um-ajax-spinner-svg um-ajax-spinner-s"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path d="M45 24C45 26.7578 44.4568 29.4885 43.4015 32.0364C42.3461 34.5842 40.7993 36.8992 38.8492 38.8492C36.8992 40.7993 34.5842 42.3461 32.0364 43.4015C29.4885 44.4568 26.7578 45 24 45C21.2422 45 18.5115 44.4568 15.9636 43.4015C13.4158 42.3461 11.1008 40.7993 9.15075 38.8492C7.20072 36.8992 5.65388 34.5842 4.59853 32.0363C3.54318 29.4885 3 26.7578 3 24C3 21.2422 3.54318 18.5115 4.59853 15.9636C5.65388 13.4158 7.20073 11.1008 9.15076 9.15075C11.1008 7.20072 13.4158 5.65387 15.9637 4.59853C18.5115 3.54318 21.2423 3 24 3C26.7578 3 29.4885 3.54318 32.0364 4.59853C34.5842 5.65388 36.8992 7.20073 38.8493 9.15077C40.7993 11.1008 42.3461 13.4158 43.4015 15.9637C44.4568 18.5115 45 21.2423 45 24L45 24Z" stroke="var(--um-gray-100,#f2f4f7)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/><path d="M24 3C26.7578 3 29.4885 3.54318 32.0364 4.59853C34.5842 5.65388 36.8992 7.20073 38.8492 9.15076C40.7993 11.1008 42.3461 13.4158 43.4015 15.9637C44.4568 18.5115 45 21.2422 45 24" stroke="var(--um-primary-600-bg,#7f56d9)" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/></svg></span></div>',source:r},UM.profile.avatarModal=UM.modal.addModal(a,null),!0)}),wp.hooks.addFilter("um_uploader_file_upload_failed","ultimate-member",function(e,r,t,o,a){return"upload-avatar"!==r.data("handler")?e:(null===a?alert(wp.i18n.__("File was not loaded. Internal server error.","ultimate-member")):a?a.info&&0===a.OK&&alert(a.info):alert(wp.i18n.__("File was not loaded. Wrong file upload server response.","ultimate-member")),!0)});
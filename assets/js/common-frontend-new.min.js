"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.frontend&&(UM.frontend={}),UM.frontend={cropper:{obj:null,init:function(){let t=jQuery(".um-modal .um-profile-photo-crop-wrapper img").first();if(t.length&&""!==t.attr("src")){UM.frontend.cropper.obj&&UM.frontend.cropper.destroy();var n=jQuery(".um-modal .um-profile-photo-crop-wrapper"),o=t.parent().data("crop"),r=t.parent().data("min_width"),a=t.parent().data("min_height"),i=t.parent().data("ratio"),l=jQuery(".um-modal").find("#um_upload_single").data("ratio"),d=(l&&(i=l.split(":")[0]),jQuery(window).height()-(jQuery(".um-modal-buttons-wrapper").height()+20)-80-jQuery(".um-modal-header:visible").height()),l=new Image;l.src=t.attr("src"),new ResizeObserver((e,o)=>{o.disconnect(),t.css({height:"auto"}),n.css({height:"auto"}),n.css({height:d+"px","max-height":d+"px"}),t.css({height:"auto"})}).observe(l);let e;"square"===o?e={minWidth:r,minHeight:a,dragCrop:!1,aspectRatio:1,zoomable:!1,rotatable:!1,dashed:!1}:"cover"===o?(0<Math.round(r/i)&&(a=Math.round(r/i)),e={minWidth:r,minHeight:a,dragCrop:!1,aspectRatio:i,zoomable:!1,rotatable:!1,dashed:!1}):"user"===o&&(e={minWidth:r,minHeight:a,dragCrop:!0,aspectRatio:"auto",zoomable:!1,rotatable:!1,dashed:!1}),e&&(UM.frontend.cropper.obj=new Cropper(t[0],e))}},destroy:function(){0<jQuery(".cropper-container").length&&UM.frontend.cropper.obj&&(UM.frontend.cropper.obj.destroy(),UM.frontend.cropper.obj=null)}},dropdown:{init:function(){jQuery(".um-dropdown").um_dropdownMenu()}},toggleElements:{init:function(){jQuery(document.body).on("click","[data-um-toggle]",function(e){e.preventDefault();let t=jQuery(this);if(!t.data("um-toggle-ignore")){t.data("um-toggle-ignore",!0);let o=jQuery(t.data("um-toggle"));(o=wp.hooks.applyFilters("um_toggle_block",o,t)).toggleClass("um-toggle-block-collapsed"),t.toggleClass("um-toggle-button-active");function n(e){o.find(".um-toggle-block-inner").toggleClass("um-visible"),e||t.data("um-toggle-ignore",!1)}return o.hasClass("um-toggle-block-collapsed")?(n(!0),setTimeout(function(){t.data("um-toggle-ignore",!1)},500)):setTimeout(n,500),!1}})}},progressBar:{init:function(){jQuery(".um-progress-bar").each(function(){jQuery(this).find(".um-progress-bar-inner").css("width",jQuery(this).data("value")+"%")})},set:function(e,o){e.data("value",o).attr("title",o+"%"),e.find(".um-progress-bar-inner").css("width",o+"%").attr("title",o+"%"),e.siblings(".um-progress-bar-label").text(o+"%")}},responsive:{resolutions:{xs:320,s:576,m:768,l:992,xl:1024},getSize:function(e){var o,t=UM.frontend.responsive;for(o in t.resolutions)if(t.resolutions.hasOwnProperty(o)&&t.resolutions[o]===e)return o;return!1},setClass:function(){let r=UM.frontend.responsive,a=Object.values(r.resolutions);a.sort(function(e,o){return o-e}),jQuery(".um").each(function(){let n=jQuery(this);if(!n.hasClass("um-not-responsive")){let t=n.outerWidth();jQuery.each(a,function(e){e=r.getSize(a[e]);n.removeClass("um-ui-"+e)}),jQuery.each(a,function(e){var o=r.getSize(a[e]);return t>=a[e]||"xs"===o&&t<=a[e]?(n.addClass("um-ui-"+o),!1):void 0})}})}},uploaders:[],uploader:{init:function(){jQuery(".um-uploader-button").each(function(){let i=jQuery(this),l=i.parents(".um-uploader");if(!l.data("plupload")){var o=l.find(".um-uploader-dropzone");let a=l.find(".um-uploader-filelist");var t=i.data("mime-types"),n=parseInt(i.data("max-size")),r=i.data("multiple"),d=i.data("handler"),u=i.data("nonce"),t={prevent_duplicates:!0,mime_types:t};0!==n&&(t.max_file_size=plupload.formatSize(n));let e={browse_button:i.get(0),url:wp.ajax.settings.url+"?action=um_upload&handler="+d+"&nonce="+u,chunk_size:"1024kb",max_retries:1,multi_selection:r,filters:t,init:{Error:function(t,n){if(wp.hooks.doAction("um_uploader_error",l,t,n),void 0!==n.file&&a.length){a.removeClass("um-display-none");let o=a.find("#"+n.file.id);if(o.length)o.addClass("um-upload-failed");else{t=l.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file um-upload-failed").removeClass("um-uploader-file-placeholder um-display-none").attr("id",n.file.id);a.append(t),(o=a.find("#"+n.file.id)).find(".um-uploader-file-name").text(n.file.name);let e=n.file.name.split(".").pop();""===n.file.type&&(e="file"),o.find(".um-file-extension-text").text(e)}o.find(".um-supporting-text").text(n.message),o.find(".um-progress-bar-wrapper").remove()}},FileFiltered:function(t,o){var n=wp.hooks.applyFilters("um_uploader_file_filtered",null,i,t,o);if(null===n&&a.length){a.removeClass("um-display-none"),t.getOption("multi_selection")||a.find(".um-uploader-file").each(function(e,o){t.removeFile(o.id)});n=a.find("#"+o.id);if(!n.length){var r=l.find(".um-uploader-file-placeholder").clone().addClass("um-uploader-file").removeClass("um-uploader-file-placeholder um-display-none").attr("id",o.id);a.append(r),(n=a.find("#"+o.id)).find(".um-uploader-file-name").text(o.name);let e=o.name.split(".").pop();""===o.type&&(e="file"),n.find(".um-file-extension-text").text(e),n.find(".um-supporting-text").text(plupload.formatSize(o.size))}}},FilesAdded:function(e,o){wp.hooks.doAction("um_uploader_files_added",l,e,o),o.length&&e.start()},FilesRemoved:function(e,o){wp.hooks.doAction("um_uploader_files_removed",l,e,o),o.length&&$.each(o,function(e,o){jQuery("#"+o.id).remove()})},FileUploaded:function(e,o,t){var n,r;200===t.status&&t.response?(r=JSON.parse(t.response))?r.info&&0===r.OK?null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,i,e,o,r)&&a.length&&((n=a.find("#"+o.id)).find(".um-supporting-text").text(r.info),n.addClass("um-upload-failed"),n.find(".um-progress-bar-wrapper").remove()):r.data&&null===wp.hooks.applyFilters("um_uploader_file_uploaded",null,i,e,o,r)&&a.length&&((n=a.find("#"+o.id)).data("filename",r.data[0].name_saved).data("nonce",r.data[0].delete_nonce),n.find(".um-progress-bar-wrapper").remove(),n.addClass("um-upload-completed")):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,i,e,o,r)&&a.length&&((n=a.find("#"+o.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded. Wrong file upload server response.","ultimate-member")),n.addClass("um-upload-failed"),n.find(".um-progress-bar-wrapper").remove()):null===wp.hooks.applyFilters("um_uploader_file_upload_failed",null,i,e,o,null)&&a.length&&((r=a.find("#"+o.id)).find(".um-supporting-text").text(wp.i18n.__("File was not loaded, Status Code ","ultimate-member")+t.status),r.addClass("um-upload-failed"),r.find(".um-progress-bar-wrapper").remove())},PostInit:function(e){},UploadProgress:function(e,o){wp.hooks.doAction("um_uploader_upload_progress",l,e,o);e=jQuery("#"+o.id).find(".um-progress-bar");e.length&&UM.frontend.progressBar.set(e,o.percent)},UploadComplete:function(e,o){wp.hooks.doAction("um_uploader_upload_complete",l,e,o)}}};o.length&&(e.drop_element=o.get(0)),(e=wp.hooks.applyFilters("um_uploader_data",e,d,i)).url&&(n=new plupload.Uploader(e),UM.frontend.uploaders[n.id]=n,l.data("plupload",n.id),n.init())}}),jQuery(document.body).on("dragover",".um-uploader-dropzone",function(e){let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).attr("drop-active",!0),e.preventDefault()}),jQuery(document.body).on("dragleave",".um-uploader-dropzone",function(e){e.preventDefault();let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).removeAttr("drop-active")}),jQuery(document.body).on("drop",".um-uploader-dropzone",function(e){e.preventDefault();let o=e.target;e.target.classList.contains("um-uploader-dropzone")||(o=o.closest(".um-uploader-dropzone")),jQuery(o).removeAttr("drop-active")}),jQuery(document.body).on("click",".um-upload-link",function(e){e.preventDefault(),jQuery(this).parents(".um-uploader").find(".um-uploader-button").trigger("click")}),jQuery(document.body).on("click",".um-uploader-file-remove",function(){if(!confirm(wp.i18n.__("Are you sure that you want to delete this file?","ultimate-member")))return!1;function e(){var e=t.attr("id");UM.frontend.uploaders[o.data("plupload")].removeFile(e),t.remove()}let o=jQuery(this).parents(".um-uploader"),t=jQuery(this).parents(".um-uploader-file");var n,r;t.hasClass("um-upload-failed")?e():(n=t.data("filename"),r=t.data("nonce"),wp.ajax.send("um_delete_temp_file",{data:{name:n,nonce:r},success:function(){e()},error:function(e){alert(e),console.log(e)}}))})}},url:{parseData:function(){let o={};let t=window.location.search.substring(1).split("&");return jQuery.each(t,function(e){e=t[e].split("=");o[e[0]]=e[1]}),o}}},wp.hooks.addAction("um_remove_modal","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_after_removing_preview","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_window_resize","um_common_frontend",function(){UM.frontend.cropper.destroy()}),wp.hooks.addAction("um_member_directory_loaded","um_common_frontend",function(){UM.frontend.dropdown.init()}),wp.hooks.addAction("um_member_directory_build_template","um_common_frontend",function(){UM.frontend.dropdown.init()}),jQuery(document).ready(function(e){UM.frontend.dropdown.init(),UM.frontend.toggleElements.init(),UM.frontend.progressBar.init(),UM.frontend.uploader.init(),e(window).on("resize",function(){UM.frontend.responsive.setClass()})}),jQuery(window).on("load",function(){UM.frontend.responsive.setClass()});
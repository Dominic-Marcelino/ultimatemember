"use strict";var um_components=wp.components,umSelectControl=um_components.SelectControl,umTextareaControl=um_components.TextareaControl;function um_admin_blocks_custom_fields(e,t){return wp.hooks.applyFilters("um_admin_blocks_custom_fields",[],e,t)}var um_block_restriction=wp.compose.createHigherOrderComponent(function(e){var s={um_who_access:"um-block-settings-hidden",um_roles_access:"um-block-settings-hidden",um_message_type:"um-block-settings-hidden",um_message_content:"um-block-settings-hidden"},s=wp.hooks.applyFilters("um_admin_blocks_condition_fields_default",s);return function(t){return!0!==t.attributes.um_is_restrict?(s.um_who_access="um-block-settings-hidden",s.um_roles_access="um-block-settings-hidden",s.um_message_type="um-block-settings-hidden",s.um_message_content="um-block-settings-hidden"):(s.um_who_access="",0===parseInt(t.attributes.um_who_access)||void 0===t.attributes.um_who_access?(s.um_roles_access="um-block-settings-hidden",s.um_message_type="um-block-settings-hidden",s.um_message_content="um-block-settings-hidden"):(1===parseInt(t.attributes.um_who_access)&&(s.um_roles_access=""),s.um_message_type="",2===parseInt(t.attributes.um_message_type)?s.um_message_content="":s.um_message_content="um-block-settings-hidden")),s=wp.hooks.applyFilters("um_admin_blocks_condition_fields",s,t),wp.element.createElement(wp.element.Fragment,{},wp.element.createElement(e,t),wp.element.createElement(wp.blockEditor.InspectorControls,{},wp.element.createElement(wp.components.PanelBody,{title:wp.i18n.__("Ultimate Member: Content Restriction","ultimate-member"),className:"um-block-settings"},wp.element.createElement(wp.components.ToggleControl,{label:wp.i18n.__("Restrict access?","ultimate-member"),checked:t.attributes.um_is_restrict,onChange:function(e){t.setAttributes({um_is_restrict:e}),!1===e?(s.um_who_access="um-block-settings-hidden",s.um_roles_access="um-block-settings-hidden",s.um_message_type="um-block-settings-hidden",s.um_message_content="um-block-settings-hidden"):s.um_who_access="",s=wp.hooks.applyFilters("um_admin_blocks_condition_fields_on_change",s,"um_is_restrict",e)}}),wp.element.createElement(umSelectControl,{type:"number",className:s.um_who_access,label:wp.i18n.__("Who can access this block?","ultimate-member"),value:t.attributes.um_who_access,options:[{label:wp.i18n.__("Everyone","ultimate-member"),value:0},{label:wp.i18n.__("Logged in users","ultimate-member"),value:1},{label:wp.i18n.__("Logged out users","ultimate-member"),value:2}],onChange:function(e){t.setAttributes({um_who_access:e}),0===parseInt(e)?(s.um_message_type="um-block-settings-hidden",s.um_message_content="um-block-settings-hidden",s.um_roles_access="um-block-settings-hidden"):1===parseInt(e)?(s.um_message_type="",s.um_roles_access=""):(s.um_message_type="",s.um_roles_access="um-block-settings-hidden"),s=wp.hooks.applyFilters("um_admin_blocks_condition_fields_on_change",s,"um_who_access",e)}}),wp.element.createElement(umSelectControl,{multiple:!0,className:s.um_roles_access,label:wp.i18n.__("What roles can access this block?","ultimate-member"),value:t.attributes.um_roles_access,options:um_restrict_roles,onChange:function(e){t.setAttributes({um_roles_access:e})}}),wp.element.createElement(umSelectControl,{type:"number",className:s.um_message_type,label:wp.i18n.__("Restriction action","ultimate-member"),value:t.attributes.um_message_type,options:[{label:wp.i18n.__("Hide block","ultimate-member"),value:0},{label:wp.i18n.__("Show global default message","ultimate-member"),value:1},{label:wp.i18n.__("Show custom message","ultimate-member"),value:2}],onChange:function(e){t.setAttributes({um_message_type:e}),2===parseInt(e)?s.um_message_content="":s.um_message_content="um-block-settings-hidden"}}),wp.element.createElement(umTextareaControl,{type:"number",className:s.um_message_content,label:wp.i18n.__("Custom restricted access message","ultimate-member"),value:t.attributes.um_message_content,onChange:function(e){t.setAttributes({um_message_content:e})}}),um_admin_blocks_custom_fields(s,t))))}},"um_block_restriction");wp.hooks.addFilter("editor.BlockEdit","um-block/um_block_restriction",um_block_restriction);var um_block_restrict_settings={um_is_restrict:{type:"boolean"},um_who_access:{type:"select"},um_roles_access:{type:"select"},um_message_type:{type:"select"},um_message_content:{type:"string"}};function um_add_block_attributes(e){var t;return"undefined"!=typeof lodash&&(t=lodash.assign,e.attributes=t(e.attributes,um_block_restrict_settings)),e}um_block_restrict_settings=wp.hooks.applyFilters("um_admin_blocks_restrict_settings",um_block_restrict_settings),wp.hooks.addFilter("blocks.registerBlockType","um-block/um_add_block_attributes",um_add_block_attributes);
var $um_tiny_editor={};function um_admin_live_update_scripts(){jQuery(".um-adm-conditional").each(function(){jQuery(this).trigger("change")}),jQuery(".um-admin-colorpicker").length&&jQuery(".um-admin-colorpicker").wpColorPicker()}function um_admin_new_modal(i,e,n){jQuery("body").find(".um-admin-overlay");UM.common.tipsy.hide(),um_admin_remove_modal(),jQuery("body").addClass("um-admin-modal-open").append('<div class="um-admin-overlay"></div><div class="um-admin-modal"></div>'),jQuery("#"+i).prependTo(".um-admin-modal"),jQuery("#"+i).show(),jQuery(".um-admin-modal").show(),jQuery(".um-admin-modal-head").append('<a href="javascript:void(0);" data-action="UM_remove_modal" class="um-admin-modal-close"><i class="um-faicon-times"></i></a>'),1==e&&(um_admin_modal_size(n),um_admin_modal_preload()),um_admin_modal_responsive()}function um_tinymce_init(e,i){var n,a=jQuery("#"+e);("object"==typeof tinyMCE&&null!==tinyMCE.get(e)?(tinyMCE.triggerSave(),tinyMCE.EditorManager.execCommand("mceRemoveEditor",!0,e),"4"===tinyMCE.majorVersion?window.tinyMCE.execCommand("mceRemoveEditor",!0,e):window.tinyMCE.execCommand("mceRemoveControl",!0,e),$um_tiny_editor=jQuery("<div>").append(a.parents("#wp-"+e+"-wrap").clone()),a.parents("#wp-"+e+"-wrap").replaceWith('<div class="um_tiny_placeholder"></div>'),jQuery(".um-admin-editor:visible").html(jQuery($um_tiny_editor).html()),n=void 0===tinyMCEPreInit.mceInit[e]?tinyMCEPreInit.mceInit[e]=tinyMCE.extend({},tinyMCEPreInit.mceInit[e]):tinyMCEPreInit.mceInit[e],"function"==typeof QTags&&(QTags(tinyMCEPreInit.qtInit[e]),QTags._buttonsInit()),"object"==typeof window.switchEditors&&window.switchEditors.go(e),tinyMCE.init(n),tinyMCE.get(e).setContent(i),a):($um_tiny_editor=jQuery("<div>").append(a.parents("#wp-"+e+"-wrap").clone()),a.parents("#wp-"+e+"-wrap").replaceWith('<div class="um_tiny_placeholder"></div>'),jQuery(".um-admin-editor:visible").html(jQuery($um_tiny_editor).html()),"function"==typeof QTags&&(QTags(tinyMCEPreInit.qtInit[e]),QTags._buttonsInit()),jQuery("#"+e))).html(i),jQuery("body").on("click",".wp-switch-editor",function(){var i=jQuery(this);i.hasClass("wp-switch-editor")&&"object"==typeof window.switchEditors&&(i=i.hasClass("switch-tmce")?"tmce":"html",window.switchEditors.go(e,i))})}function um_admin_modal_ajaxcall(e,i,n,a){in_row="",in_sub_row="",in_column="",in_group="",jQuery(".um-col-demon-settings").data("in_column")&&(in_row=jQuery(".um-col-demon-settings").data("in_row"),in_sub_row=jQuery(".um-col-demon-settings").data("in_sub_row"),in_column=jQuery(".um-col-demon-settings").data("in_column"),in_group=jQuery(".um-col-demon-settings").data("in_group"));var m=jQuery("input[type=hidden][id=form__um_mode]").val();return jQuery.ajax({url:wp.ajax.settings.url,type:"POST",data:{action:"um_dynamic_modal_content",act_id:e,arg1:i,arg2:n,arg3:a,in_row:in_row,in_sub_row:in_sub_row,in_column:in_column,in_group:in_group,nonce:um_admin_scripts.nonce,form_mode:m},complete:function(){um_admin_modal_loaded(),um_admin_modal_responsive()},success:function(i){jQuery(".um-admin-modal").find(".um-admin-modal-body").html(i),um_responsive(),um_admin_live_update_scripts(),jQuery("#_custom_dropdown_options_source").trigger("blur"),0<jQuery(".um-admin-editor:visible").length&&("um_admin_edit_field_popup"==e?um_tinymce_init("um_editor_edit",jQuery(".um-admin-modal:visible .dynamic-mce-content").html()):um_tinymce_init("um_editor_new","")),"um_admin_preview_form"===e&&jQuery(".um-admin-preview-overlay").css("height",+jQuery(".um-admin-preview-overlay").siblings(".um").outerHeight(!0)+20+"px"),UM.admin.tooltip.init(),UM.admin.datetimePicker.init()},error:function(i){}}),!1}function um_admin_modal_responsive(){var i=jQuery(".um-admin-modal:visible").innerHeight()/2+"px";jQuery(".um-admin-modal:visible").css({"margin-top":"-"+i}),jQuery("#UM_preview_form .um-s1").length&&jQuery("#UM_preview_form .um-s1").select2({allowClear:!0}),jQuery("#UM_preview_form .um-s2").length&&jQuery("#UM_preview_form .um-s2").select2({allowClear:!1,minimumResultsForSearch:10})}function um_admin_remove_modal(){0<jQuery(".um-admin-editor:visible").length&&(tinyMCE.triggerSave(),("UM_edit_field"==jQuery(".um-admin-modal:visible").find("form").parent().attr("id")?jQuery("#wp-um_editor_edit-wrap"):jQuery("#wp-um_editor_new-wrap")).remove(),jQuery(".um_tiny_placeholder").replaceWith(jQuery($um_tiny_editor).html())),UM.admin.tooltip.close(),UM.common.tipsy.hide(),jQuery("body").removeClass("um-admin-modal-open"),jQuery('.um-admin-modal div[id^="UM_"]').hide().appendTo("body"),jQuery(".um-admin-modal,.um-admin-overlay").remove()}function um_admin_modal_preload(){jQuery(".um-admin-modal:visible").addClass("loading"),jQuery(".um-admin-modal-body:visible").empty()}function um_admin_modal_loaded(){jQuery(".um-admin-modal:visible").removeClass("loading")}function um_admin_modal_size(i){jQuery(".um-admin-modal:visible").addClass(i)}function um_admin_modal_add_attr(i,e){jQuery(".um-admin-modal:visible").data(i,e)}jQuery(document).ready(function(){jQuery(document.body).on("click",'.um-admin-overlay, a[data-action="UM_remove_modal"]',function(){UM.common.tipsy.hide(),um_admin_remove_modal()}),jQuery(document.body).on("click",'a[data-modal^="UM_"], span[data-modal^="UM_"]',function(i){i.preventDefault();i=jQuery(this).attr("data-modal");return jQuery(this).attr("data-back")&&(jQuery("#UM_fonticons").find("a.um-admin-modal-back").attr("data-modal",jQuery(this).attr("data-back")),""==jQuery("#"+jQuery(this).attr("data-back")).find("input#_icon").val())&&jQuery("#UM_fonticons").find(".um-admin-icons span").removeClass("highlighted"),jQuery(this).data("dynamic-content")?(um_admin_new_modal(i,!0,jQuery(this).data("modal-size")),um_admin_modal_ajaxcall(jQuery(this).data("dynamic-content"),jQuery(this).data("arg1"),jQuery(this).data("arg2"),jQuery(this).data("arg3"))):um_admin_new_modal(i),!1}),jQuery(document.body).on("click","#UM_fonticons a.um-admin-modal-back:not(.um-admin-modal-cancel)",function(){var i="",e=jQuery(this).attr("data-code");""!=e&&(i=jQuery(this).attr("data-modal")?"#"+jQuery(this).attr("data-modal"):".postbox",jQuery(i).find("input#_icon,input#_um_icon,input#notice__um_icon,input#um_profile_tab__icon").val(e),jQuery(i).find("span.um-admin-icon-value").html('<i class="'+e+'"></i>'),jQuery(i).find(".um-admin-icon-clear").show()),jQuery(this).attr("data-code",""),".postbox"==i&&(UM.common.tipsy.hide(),um_admin_remove_modal())}),jQuery(document.body).on("click","span.um-admin-icon-clear",function(){var i=jQuery(this).parents("p");jQuery("#UM_fonticons a.um-admin-modal-back").attr("data-code",""),i.find('input[type="hidden"]').val(""),i.find(".um-admin-icon-value").html(wp.i18n.__("No Icon","ultimate-member")),(i=jQuery(this).parents("td")).find('input[type="hidden"]').val(""),i.find(".um-admin-icon-value").html(wp.i18n.__("No Icon","ultimate-member")),jQuery(this).hide()}),jQuery(document.body).on("keyup blur","#_icon_search",function(){(""!==jQuery(this).val().toLowerCase()?(jQuery(".um-admin-icons span").hide(),jQuery('.um-admin-icons span[data-code*="'+jQuery(this).val().toLowerCase()+'"]')):jQuery(".um-admin-icons span:hidden")).show(),um_admin_modal_responsive()})});
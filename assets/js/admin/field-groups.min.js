var um_radioStates={};function um_recalculate_indexes(e){e.find(".um-admin-option-row").each(function(e){jQuery(this).show().attr("data-option_index",e).data("option_index",e);var i=jQuery(this).find(".um-admin-option-default-multi").data("base-name");jQuery(this).find(".um-admin-option-default-multi").attr("name",i+"["+e+"]"),jQuery(this).find(".um-admin-option-default").attr("value",e);i=jQuery(this).find(".um-admin-option-key").data("base-name");jQuery(this).find(".um-admin-option-key").attr("name",i+"["+e+"]");i=jQuery(this).find(".um-admin-option-val").data("base-name");jQuery(this).find(".um-admin-option-val").attr("name",i+"["+e+"]")}),um_radio_set_states(e)}function um_multi_or_not(e,i){let t=i.find(".um-admin-option-rows"),d=t.find(".um-admin-option-row");e.is(":checked")?(d.find(".um-admin-option-default-multi").prop("disabled",!1).show(),d.find(".um-admin-option-default").prop("disabled",!0).prop("checked",!1).hide()):(d.find(".um-admin-option-default-multi").prop("disabled",!0).prop("checked",!1).hide(),d.find(".um-admin-option-default").prop("disabled",!1).show()),um_radio_set_states(t)}function um_admin_init_draggable(t){t.sortable({items:".um-admin-option-row",forcePlaceholderSize:!0,update:function(e,i){um_recalculate_indexes(t)}}),um_radio_set_states(t)}function um_radio_set_states(e){um_radioStates={},jQuery.each(e.find(".um-admin-option-default"),function(e,i){um_radioStates[i.value]=jQuery(i).is(":checked")})}"undefined"==typeof um_admin_field_groups_data&&(um_admin_field_groups_data={}),"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.fields_groups&&(UM.fields_groups={}),UM.fields_groups={tabs:{setActive:function(e,i){var t=e.data("tab");let d=e.parents(".um-edit-field-tabs");d.find("div[data-tab]").removeClass("current"),e.addClass("current");let n=e.parents(".um-edit-field-tabs").siblings(".um-edit-field-tabs-content");n.find("div[data-tab]").removeClass("current"),n.find('div[data-tab="'+t+'"]').addClass("current")},compare:function(e,i){if(e.length!==i.length)return!1;for(var t=0;t<e.length;t++)if(e[t]!==i[t])return!1;return!0},compareDeep:function(e,d){if(typeof e!=typeof d)return!1;if("object"!=typeof e)return e===d;{if(!UM.fields_groups.tabs.compare(Object.keys(e),Object.keys(d)))return!1;let t=!0;return Object.entries(e).forEach(([e,i])=>{if(t=UM.fields_groups.tabs.compareDeep(i,d[e]),!t)return!1}),t}},reBuild:function(e,i,t){var d=e.find(".um-edit-field-tabs > div[data-tab].current").data("tab");e.find(".um-edit-field-tabs > div[data-tab]").remove(),e.find(".um-edit-field-tabs-content > div[data-tab]").each(function(){i.includes(t(this).data("tab"))||t(this).remove()});let n="";for(var l=0;l<i.length;l++)n+='<div data-tab="'+i[l]+'">'+um_admin_field_groups_data.field_tabs[i[l]]+"</div>",e.find('.um-edit-field-tabs-content > div[data-tab="'+i[l]+'"]').length||e.find(".um-edit-field-tabs-content").append('<div data-tab="'+i[l]+'"></div>');e.find(".um-edit-field-tabs").html(n),e.find('.um-edit-field-tabs > div[data-tab="'+d+'"]').addClass("current"),e.find('.um-edit-field-tabs-content > div[data-tab="'+d+'"]').addClass("current")}},sortable:{init:function(t){t(".um-field-groups-fields-wrapper").sortable({items:".um-field-groups-field-row",connectWith:"um-field-groups-fields-wrapper",placeholder:"um-field-groups-field-placeholder",forcePlaceholderSize:!0,axis:"y",cursor:"move",handle:".um-field-groups-field-move-link",update:function(e,i){t(".um-field-groups-field-row").each(function(e){e=+e+1;t(this).find(".um-field-groups-field-order").val(e),t(this).find(".um-field-groups-field-row-header .um-field-groups-field-move-link").html(e)})}}).on("sortupdate",function(){t(".um-field-groups-field-row").each(function(e){e=+e+1;t(this).find(".um-field-groups-field-order").val(e),t(this).find(".um-field-groups-field-row-header .um-field-groups-field-move-link").html(e)})})},destroy:function(e){e(".um-field-groups-fields-wrapper").sortable("destroy")},reInit:function(e){UM.fields_groups.sortable.destroy(e),UM.fields_groups.sortable.init(e),e(".um-field-groups-fields-wrapper").trigger("sortupdate")}},field:{newIndex:0,settingsScreens:{},prepareSettings:function(d,e,n){d(".um-field-groups-fields-wrapper").find(".um-field-groups-field-row").each(function(){let i=d(this).data("field"),t=d(this).find(".um-field-groups-field-type-select").val();void 0!==e&&e!=i||("object"!=typeof UM.fields_groups.field.settingsScreens[i]&&(UM.fields_groups.field.settingsScreens[i]={}),"object"!=typeof UM.fields_groups.field.settingsScreens[i][t]&&(UM.fields_groups.field.settingsScreens[i][t]={}),d(this).find(".um-edit-field-tabs > div[data-tab]").each(function(){var e=d(this).data("tab");void 0!==n&&n!=e||(UM.fields_groups.field.settingsScreens[i][t][e]=d(this).parents(".um-edit-field-tabs").siblings(".um-edit-field-tabs-content").find('div[data-tab="'+e+'"] > .form-table')[0].outerHTML)}))})},add:function(f){let e=f(".um-field-groups-fields-wrapper"),i=f(".um-field-groups-field-row-template").clone().addClass("um-field-groups-field-row").removeClass("um-field-groups-field-row-template");UM.fields_groups.field.newIndex++;let p=UM.fields_groups.field.newIndex;i.data("field","new_"+p).attr("data-field","new_"+p);var t,d=e.find(".um-field-groups-field-row").length+1;i.find(".um-field-groups-field-move-link").html(d);let n=i.find(".um-field-groups-field-id");n.removeAttr("disabled").prop("disabled",!1);let l=n.attr("name");void 0!==l&&(t=l.replace("{index}",p),n.attr("name",t));let o=i.find(".um-field-groups-field-order");o.val(d).removeAttr("disabled").prop("disabled",!1);let a=o.attr("name");void 0!==a&&(d=a.replace("{index}",p),o.attr("name",d)),i.find(".um-form-table").each(function(e){let i=f(this).data("extra-class");void 0!==i&&(i=i.replace("{index}",p),i&&f(this).removeAttr("class").addClass("form-table um-form-table "+i))}),i.find(".um-forms-line").each(function(e){let i=f(this).data("prefix");var t,d,n;void 0!==i&&(t=i.replace("new_index","new_"+p),f(this).data("prefix",t).attr("data-prefix",t));let l=f(this).find("label"),o=l.attr("for");void 0!==o&&(t=o.replace("new_index","new_"+p),l.attr("for",t));let a=f(this).find(".um-forms-field"),s=a.attr("id");void 0!==s&&(d=s.replace("new_index","new_"+p),a.attr("id",d));let u=a.attr("name");void 0!==u&&(d=u.replace("{index}",p),a.attr("name",d)),a.removeAttr("disabled").prop("disabled",!1);let r=a.siblings('input[type="hidden"]');if(r.length){let e=r.attr("id");void 0!==e&&(n=e.replace("new_index","new_"+p),r.attr("id",n));let i=r.attr("name");void 0!==i&&(n=i.replace("{index}",p),r.attr("name",n)),r.removeAttr("disabled").prop("disabled",!1)}});let s=i.data("field");i.find(".um-conditional-rule-field-col .um-conditional-rule-setting").each(function(){f(this).find("option").each(function(){f(this).is(":selected")||""===f(this).attr("value")||f(this).remove()});let t=f(this);var e=t.val();f.each(UM.fields_groups.field.conditional.fieldsList,function(e,i){t.find('option[value="'+e+'"]').length||s==e||t.find('option[value=""]').after('<option value="'+e+'">'+i.title+"</option>")});let i=t.find("option").detach();i.sort(function(e,i){return""===f(e).val()?0:f(e).text()>f(i).text()?1:f(e).text()<f(i).text()?-1:0}),t.append(i).val(e)}),e.append(i),1<e.find(".um-field-groups-field-row").length?UM.fields_groups.sortable.reInit(f):(e.removeClass("hidden"),e.siblings(".um-field-groups-builder-header").removeClass("hidden"),e.siblings(".um-field-groups-fields-wrapper-empty").addClass("hidden"),UM.fields_groups.sortable.init(f)),UM.fields_groups.field.conditional.prepareFieldsList(f)},toggleEdit:function(e,i){e.hasClass("um-field-row-edit-mode")?UM.fields_groups.field.hideEdit(e,i):UM.fields_groups.field.showEdit(e,i)},showEdit:function(e,i){e.addClass("um-field-row-edit-mode"),e.find(".um-field-groups-field-multiple-input").length&&e.find(".um-field-groups-field-multiple-input").trigger("change")},hideEdit:function(e,i){e.removeClass("um-field-row-edit-mode")},duplicate:function(e,i){var t=e.parents(".um-field-groups-field-row").clone();e.parents(".um-field-groups-field-row").after(t),UM.fields_groups.sortable.reInit(i),UM.fields_groups.field.conditional.prepareFieldsList(i)},delete:function(e,i){let t=e.parents(".um-field-groups-fields-wrapper");e.parents(".um-field-groups-field-row").remove(),t.find(".um-field-groups-field-row").length?UM.fields_groups.sortable.reInit(i):(t.addClass("hidden"),t.siblings(".um-field-groups-builder-header").addClass("hidden"),t.siblings(".um-field-groups-fields-wrapper-empty").removeClass("hidden"),UM.fields_groups.sortable.destroy(i)),UM.fields_groups.field.conditional.prepareFieldsList(i)},conditional:{fieldsList:{},prepareFieldsList:function(e){e(".um-field-groups-fields-wrapper").find(".um-field-groups-field-row").each(function(){var t=e(this).data("field"),d=e(this).find(".um-field-groups-field-type-select").val(),n=e(this).find(".um-field-groups-field-title-input").val();if(um_admin_field_groups_data.field_types[d].conditional_rules.length){let i={};um_admin_field_groups_data.field_types[d].conditional_rules.forEach(e=>{i[e]=um_admin_field_groups_data.conditional_rules[e]});let e=null;"choice"===um_admin_field_groups_data.field_types[d].category&&(e={}),UM.fields_groups.field.conditional.fieldsList[t]={type:d,title:n,conditions:i,valueOptions:e}}})},reset:function(e,i){let t=e.parents('.um-edit-field-tabs-content > div[data-tab="conditional"]');t.find(".um-conditional-rules-wrapper .um-conditional-remove-rule").each(function(e){i(this).trigger("click")})},addRulesGroup:function(e,d){let i=e.siblings(".um-conditional-rules-group-template").clone().addClass("um-conditional-rules-group").removeClass("um-conditional-rules-group-template"),n=e.find(".um-conditional-rules-group").length;i.data("group-index",n).attr("data-group-index",n),i.find(".um-conditional-rule-setting").each(function(e){let i=d(this).attr("name");var t;void 0!==i&&(t=i.replace("{group_key}",n),d(this).attr("name",t),d(this).parents(".um-conditional-rule-field-col").length&&d(this).prop("disabled",!1).removeAttr("disabled"))}),e.find(".um-conditional-rules-wrapper-bottom").before(i),UM.fields_groups.field.conditional.showReset(e,d),UM.fields_groups.field.prepareSettings(d)},addRule:function(e,t){let i=e.parents(".um-conditional-rules-wrapper"),d=i.siblings(".um-conditional-rule-row-template").clone().addClass("um-conditional-rule-row").removeClass("um-conditional-rule-row-template"),n=e.parents(".um-conditional-rules-group").data("group-index"),l=e.parents(".um-conditional-rules-group").find(".um-conditional-rule-row").length;d.find(".um-conditional-rule-setting").each(function(e){let i=t(this).attr("name");if(void 0!==i){let e=i.replace("{group_key}",n);e=e.replace("{row_key}",l),t(this).attr("name",e),t(this).parents(".um-conditional-rule-field-col").length&&t(this).prop("disabled",!1).removeAttr("disabled")}}),e.after(d),UM.fields_groups.field.conditional.changeInputIndex(i,t),UM.fields_groups.field.conditional.showReset(i,t),UM.fields_groups.field.prepareSettings(t)},removeRule:function(e,i){let t=e.parents(".um-conditional-rules-wrapper"),d=t.find(".um-conditional-rule-row");if(1===d.length)return d.find(".um-conditional-rule-field-col select").val(""),d.find(".um-conditional-rule-condition-col select").val(""),d.find(".um-conditional-rule-value-col select,.um-conditional-rule-value-col input").val(""),void UM.fields_groups.field.conditional.hideReset(t,i);let n=e.parents(".um-conditional-rules-group");(1===n.find(".um-conditional-rule-row").length?n:e).remove(),UM.fields_groups.field.conditional.changeInputIndex(t,i),UM.fields_groups.field.prepareSettings(i)},changeInputIndex:function(e,d){let n=0;e.find(".um-conditional-rules-group").each(function(e){let t=0;d(this).find(".um-conditional-rule-row").each(function(e){d(this).find(".um-conditional-rule-setting").each(function(e){let i=d(this).data("base-name");if(void 0!==i){let e=i.replace("{group_key}",n);e=e.replace("{row_key}",t),d(this).attr("name",e)}}),t++}),d(this).data("group-index",n).attr("data-group-index",n),n++})},showReset:function(e,i){let t=e.parents('.um-edit-field-tabs-content > div[data-tab="conditional"]');t.find(".um-field-groups-field-reset-all-conditions").css({visibility:"visible"})},hideReset:function(e,i){let t=e.parents('.um-edit-field-tabs-content > div[data-tab="conditional"]');t.find(".um-field-groups-field-reset-all-conditions").css({visibility:"hidden"})},parseRules:function(e,i){let t=[];return e.find(".um-conditional-rule-field-col select,.um-conditional-rule-condition-col select,.um-conditional-rule-value-col select,.um-conditional-rule-value-col input").each(function(e){""!==i(this).val()&&t.push(i(this))}),t},isEmpty:function(e,i){return!UM.fields_groups.field.conditional.parseRules(e,i).length}},changeType:function(n,l){let o=n.data("field");var e=UM.fields_groups.field.conditional.fieldsList[o].type,i=um_admin_field_groups_data.field_types[e].settings;let a=n.find(".um-field-groups-field-type-select").val();var t=um_admin_field_groups_data.field_types[a].settings,d=Object.keys(i),s=Object.keys(t),e=n.find('.um-field-groups-field-type-select option[value="'+n.find(".um-field-groups-field-type-select").val()+'"]').html();if(n.find(".um-field-groups-field-type").html(e),UM.fields_groups.tabs.compare(d,s)||UM.fields_groups.tabs.reBuild(n,s,l),n.find(".um-edit-field-tabs > div[data-tab]").addClass("disabled"),"object"==typeof UM.fields_groups.field.settingsScreens[o]&&"object"==typeof UM.fields_groups.field.settingsScreens[o][a])l.each(UM.fields_groups.field.settingsScreens[o][a],function(e,i){let t=n.find('.um-edit-field-tabs-content > div[data-tab="'+e+'"]'),d=l("<div>").append(i).find(".form-table");"conditional"===e&&d.find('[data-field_type="conditional_rules"]').html(t.find('[data-field_type="conditional_rules"]').html()),t.find(".um-field-groups-static-field").each(function(){d.find('[name="'+l(this).attr("name")+'"]').val(l(this).val())}),n.find('.um-edit-field-tabs-content > div[data-tab="'+e+'"]').html(d[0].outerHTML)}),n.find(".um-field-groups-field-type-select").removeClass("disabled").prop("disabled",!1),run_check_conditions(),UM.fields_groups.field.conditional.prepareFieldsList(l),n.find(".um-edit-field-tabs > div[data-tab]").removeClass("disabled"),n.find(".um-field-groups-field-multiple-input").length&&n.find(".um-field-groups-field-multiple-input").trigger("change");else{if(!UM.fields_groups.tabs.compareDeep(i.general,t.general)){n.find('.um-edit-field-tabs-content > div[data-tab="general"] .um-forms-field:not(.um-field-groups-static-field)').parents(".um-forms-line").remove();var u=Object.keys(t.general).length-2;if(0<u){let e=0;for(;e<u;)n.find('.um-edit-field-tabs-content > div[data-tab="general"] > .form-table tbody').append('<tr class="um-forms-line um-forms-skeleton"><th><span class="um-skeleton-box" style="width:100%;height:20px;"></span></th><td><span class="um-skeleton-box" style="width:100%;height:40px;margin-bottom:4px;"></span><span class="um-skeleton-box" style="width:100%;height:20px;"></span></td></tr>'),e++}}wp.ajax.send("um_fields_groups_get_settings_form",{data:{field_id:o,type:a,nonce:um_admin_scripts.nonce},success:function(e){"object"!=typeof UM.fields_groups.field.settingsScreens[o]&&(UM.fields_groups.field.settingsScreens[o]={}),"object"!=typeof UM.fields_groups.field.settingsScreens[o][a]&&(UM.fields_groups.field.settingsScreens[o][a]={}),l.each(e.fields,function(e,i){UM.fields_groups.field.settingsScreens[o][a][e]=i;let t=l("<div>").append(i).find(".form-table"),d=n.find('.um-edit-field-tabs-content > div[data-tab="'+e+'"]');"conditional"===e&&t.find('[data-field_type="conditional_rules"]').html(d.find('[data-field_type="conditional_rules"]').html()),d.find(".um-field-groups-static-field").each(function(){t.find('[name="'+l(this).attr("name")+'"]').val(l(this).val())}),d.html(t[0].outerHTML)}),n.find(".um-field-groups-field-type-select").removeClass("disabled").prop("disabled",!1),run_check_conditions(),UM.fields_groups.field.conditional.prepareFieldsList(l),n.find(".um-edit-field-tabs > div[data-tab]").removeClass("disabled"),n.find(".um-field-groups-field-multiple-input").length&&n.find(".um-field-groups-field-multiple-input").trigger("change")},error:function(e){console.error(e)}})}}}},jQuery(function(o){UM.fields_groups.field.conditional.prepareFieldsList(o),o(".um-field-groups-fields-wrapper").find(".um-field-groups-field-row").each(function(){let d=o(this).data("field");o(this).find(".um-conditional-rule-field-col .um-conditional-rule-setting").each(function(){o(this).find("option").each(function(){o(this).is(":selected")||""===o(this).attr("value")||o(this).remove()});let t=o(this);var e=t.val();o.each(UM.fields_groups.field.conditional.fieldsList,function(e,i){t.find('option[value="'+e+'"]').length||d==e||t.find('option[value=""]').after('<option value="'+e+'">'+i.title+"</option>")});let i=t.find("option").detach();i.sort(function(e,i){return""===o(e).val()?0:o(e).text()>o(i).text()?1:o(e).text()<o(i).text()?-1:0}),t.append(i).val(e)})}),UM.fields_groups.field.prepareSettings(o),console.log(UM.fields_groups.field.settingsScreens),UM.fields_groups.sortable.init(o),o(document.body).on("click",".um-field-groups-field-row",function(e){void 0!==e.target&&e.target.classList.contains("um-field-groups-toggle-edit")&&(e.preventDefault(),UM.fields_groups.field.toggleEdit(o(this),o))}),o(document.body).on("click",".um-field-groups-field-edit",function(e){e.preventDefault();e=o(this).parents(".um-field-groups-field-row");UM.fields_groups.field.toggleEdit(e,o)}),o(document.body).on("click",".um-field-groups-field-delete",function(e){e.preventDefault(),confirm(wp.i18n.__("Are you sure you want to delete this field?","ultimate-member"))&&UM.fields_groups.field.delete(o(this),o)}),o(document.body).on("click",".um-field-groups-field-duplicate",function(e){e.preventDefault(),confirm(wp.i18n.__("Are you sure you want to duplicate this field?","ultimate-member"))&&UM.fields_groups.field.duplicate(o(this),o)}),o(document.body).on("click",".um-add-field-groups-field",function(e){e.preventDefault(),UM.fields_groups.field.add(o)}),o(document.body).on("click",".um-edit-field-tabs > div[data-tab]:not(.current)",function(e){e.preventDefault(),o(this).hasClass("disabled")||UM.fields_groups.tabs.setActive(o(this),o)}),o(document.body).on("click",".um-field-groups-field-reset-all-conditions",function(e){e.preventDefault(),confirm(wp.i18n.__("Are you sure?","ultimate-member"))&&UM.fields_groups.field.conditional.reset(o(this),o)}),o(document.body).on("click",".um-conditional-add-rules-group",function(e){e.preventDefault();e=o(this).parents(".um-conditional-rules-wrapper");UM.fields_groups.field.conditional.addRulesGroup(e,o)}),o(document.body).on("click",".um-conditional-add-rule",function(e){e.preventDefault();e=o(this).parents(".um-conditional-rule-row");UM.fields_groups.field.conditional.addRule(e,o)}),o(document.body).on("click",".um-conditional-remove-rule",function(e){e.preventDefault();e=o(this).parents(".um-conditional-rule-row");UM.fields_groups.field.conditional.removeRule(e,o)}),o(document.body).on("change",".um-conditional-rule-field-col select, .um-conditional-rule-condition-col select, .um-conditional-rule-value-col select,.um-conditional-rule-value-col input",function(e){var i=o(this).parents('.um-edit-field-tabs-content > div[data-tab="conditional"]');UM.fields_groups.field.conditional.isEmpty(i,o)?UM.fields_groups.field.conditional.hideReset(o(this),o):UM.fields_groups.field.conditional.showReset(o(this),o)}),o(document.body).on("change",".um-conditional-rule-field-col .um-conditional-rule-setting",function(e){var i=o(this).val();let d=o(this).parents(".um-conditional-rule-fields");if(""===i)d.find(".um-conditional-rule-condition-col .um-conditional-rule-setting").prop("disabled",!0),d.find(".um-conditional-rule-value-col input.um-conditional-rule-setting").prop("disabled",!0).show(),d.find(".um-conditional-rule-value-col select.um-conditional-rule-setting").prop("disabled",!0).hide();else{let t=d.find(".um-conditional-rule-condition-col .um-conditional-rule-setting");t.prop("disabled",!1),t.find("option").each(function(){""!==o(this).attr("value")&&o(this).remove()});t.val();o.each(UM.fields_groups.field.conditional.fieldsList[i].conditions,function(e,i){t.find('option[value="'+e+'"]').length||t.find('option[value=""]').after('<option value="'+e+'">'+i+"</option>")});let e=t.find("option").detach();e.sort(function(e,i){return""===o(e).val()?0:o(e).text()>o(i).text()?1:o(e).text()<o(i).text()?-1:0}),t.append(e).val(""),null===UM.fields_groups.field.conditional.fieldsList[i].valueOptions?(d.find(".um-conditional-rule-value-col input.um-conditional-rule-setting").prop("disabled",!0).show(),d.find(".um-conditional-rule-value-col select.um-conditional-rule-setting").prop("disabled",!0).hide()):(d.find(".um-conditional-rule-value-col input.um-conditional-rule-setting").prop("disabled",!0).hide(),d.find(".um-conditional-rule-value-col select.um-conditional-rule-setting").prop("disabled",!0).show())}}),o(document.body).on("change",".um-conditional-rule-condition-col .um-conditional-rule-setting",function(e){var i=o(this).val();let t=o(this).parents(".um-conditional-rule-fields");var d=t.find(".um-conditional-rule-field-col .um-conditional-rule-setting").val();""===i||"!=empty"===i||"==empty"===i?(t.find(".um-conditional-rule-value-col input.um-conditional-rule-setting").prop("disabled",!0).show(),t.find(".um-conditional-rule-value-col select.um-conditional-rule-setting").prop("disabled",!0).hide()):null===UM.fields_groups.field.conditional.fieldsList[d].valueOptions?(t.find(".um-conditional-rule-value-col input.um-conditional-rule-setting").prop("disabled",!1).show(),t.find(".um-conditional-rule-value-col select.um-conditional-rule-setting").prop("disabled",!0).hide()):(t.find(".um-conditional-rule-value-col input.um-conditional-rule-setting").prop("disabled",!0).hide(),t.find(".um-conditional-rule-value-col select.um-conditional-rule-setting").prop("disabled",!1).show())}),o(".um-conditional-rules-wrapper .um-conditional-rule-condition-col .um-conditional-rule-setting").trigger("change"),o(document.body).on("change",".um-field-groups-field-title-input",function(e){o(this).parents(".um-field-groups-field-row").find(".um-field-groups-field-title").html(o(this).val()),UM.fields_groups.field.conditional.prepareFieldsList(o)}),o(document.body).on("change",".um-forms-field:not(.um-field-groups-field-type-select)",function(e){let i=o(this).parents(".um-field-groups-field-row");var t=i.data("field"),d=o(this).parents("div[data-tab]").data("tab");UM.fields_groups.field.prepareSettings(o,t,d)}),o(document.body).on("change",".um-field-groups-field-type-select",function(e){var i;o(this).hasClass("disabled")||(o(this).addClass("disabled").prop("disabled",!0),i=o(this).parents(".um-field-groups-field-row"),UM.fields_groups.field.changeType(i,o))}),o(document.body).on("change",".um-field-groups-field-metakey-input",function(e){let i=wp.i18n.__("(no metakey)","ultimate-member");""!==o(this).val()&&(i=o(this).val()),o(this).parents(".um-field-groups-field-row").find(".um-field-groups-field-metakey").html(i)}),o(document.body).on("change",".um-field-groups-field-multiple-input",function(){var e=o(this).parents(".um-field-groups-field-row");um_multi_or_not(o(this),e)}),o(document.body).on("click",".um-admin-option-rows .um-admin-option-default",function(){var t=o(this).val();o(this).prop("checked",um_radioStates[t]=!um_radioStates[t]),o.each(o(".um-admin-option-rows .um-admin-option-default"),function(e,i){i.value!==t&&(um_radioStates[i.value]=!1)})}),o(document.body).on("click",".um-admin-option-row-add",function(){let e=o(this).parents(".um-field-groups-field-row");var i=e.find(".um-field-groups-field-multiple-input"),t=o(this).parents(".um-admin-option-row");let d=o(this).parents(".um-admin-option-rows");var n=d.siblings(".um-admin-option-row-placeholder")[0].outerHTML.replace("um-admin-option-row-placeholder","um-admin-option-row");let l=o("<div>").append(n);l.find(".um-admin-option-key").prop("disabled",!1),l.find(".um-admin-option-val").prop("disabled",!1),l.find(".um-admin-option-default").prop("disabled",!1),l.find(".um-admin-option-default-multi").prop("disabled",!1),l.find(".um-admin-option-row").insertAfter(t),um_recalculate_indexes(d),um_multi_or_not(i,e),um_admin_init_draggable(d)}),o(document.body).on("click",".um-admin-option-row-remove",function(){let e=o(this).parents(".um-admin-option-row");var i=o(this).parents(".um-admin-option-rows");if(1===o(this).parents(".um-admin-option-rows").find(".um-admin-option-row").length)return e.find(".um-admin-option-key").val(""),e.find(".um-admin-option-val").val(""),e.find(".um-admin-option-default").prop("checked",!1),void e.find(".um-admin-option-default-multi").prop("checked",!1);e.remove(),um_recalculate_indexes(i),um_admin_init_draggable(i)})});
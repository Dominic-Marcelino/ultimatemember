"object"!=typeof window.UM&&(window.UM={}),"object"!=typeof UM.frontend&&(UM.frontend={}),UM.frontend.directories={list:[],getHash(e){return e.data("hash")}},UM.frontend.directory=function(e){this.hash=e,this.wrapper=jQuery('.um-directory[data-hash="'+e+'"]')},UM.frontend.directory.prototype={hash:"",wrapper:null,isBusy:!1,getHash:function(){return this.hash},getWrapper:function(){return this.wrapper},preloaderShow:function(){this.isBusy=!0,this.wrapper.find(".um-members-overlay").show()},preloaderHide:function(){this.isBusy=!1,this.wrapper.find(".um-members-overlay").hide()}};var um_members_directory_busy=[],um_member_directory_last_data=[];function um_parse_current_url(){var r={},t=window.location.search.substring(1).split("&");return jQuery.each(t,function(e){e=t[e].split("=");r[e[0]]=e[1]}),r}function um_get_data_for_directory(e,r){var t=um_members_get_hash(e),a={},i=um_parse_current_url();if(jQuery.each(i,function(e){-1!==e.indexOf("_"+t)&&""!==i[e]&&(a[e.replace("_"+t,"")]=i[e])}),r){if(void 0!==a[r])try{a[r]=decodeURIComponent(a[r])}catch(e){console.error(e)}return a[r]}return a}function um_set_url_from_data(e,r,t){var a=um_members_get_hash(e),i=um_get_data_for_directory(e),m={},d=(Array.isArray(t)?(jQuery.each(t,function(e){t[e]=encodeURIComponent(t[e])}),t=t.join("||")):jQuery.isNumeric(t)||(t=t.split("||"),jQuery.each(t,function(e){t[e]=encodeURIComponent(t[e])}),t=t.join("||")),""!==t&&(m[r+"_"+a]=t),jQuery.each(i,function(e){r===e?""!==t&&(m[e+"_"+a]=t):m[e+"_"+a]=i[e]}),jQuery.each(UM.frontend.directories.list,function(e){let r=UM.frontend.directories.list[e].getHash();var t;r!==a&&(t=um_get_data_for_directory(jQuery('.um-directory[data-hash="'+r+'"]')),jQuery.each(t,function(e){m[e+"_"+r]=t[e]}))}),[]),e=(jQuery.each(m,function(e){d.push(e+"="+m[e])}),"?"+(d=wp.hooks.applyFilters("um_member_directory_url_attrs",d)).join("&"));"?"===e&&(e=""),window.history.pushState("string","UM Member Directory",window.location.origin+window.location.pathname+e)}function um_members_get_hash(e){return e.data("hash")}function um_is_directory_busy(e){e=um_members_get_hash(e);return void 0!==um_members_directory_busy[e]&&um_members_directory_busy[e]}function um_members_show_preloader(e){um_members_directory_busy[um_members_get_hash(e)]=!0,e.find(".um-members-overlay").show()}function um_members_hide_preloader(e){um_members_directory_busy[um_members_get_hash(e)]=!1,e.find(".um-members-overlay").hide()}function um_set_range_label(e,r){var t,a="",i=e.siblings(".um-slider-range").data("placeholder-s"),m=e.siblings(".um-slider-range").data("placeholder-p"),r=r?(a=(r.values[0]===r.values[1]?i.replace("{value}",r.values[0]):m.replace("{min_range}",r.values[0]).replace("{max_range}",r.values[1])).replace("{field_label}",e.siblings(".um-slider-range").data("label")),t=r.values[0],r.values[1]):(a=(e.slider("values",0)===e.slider("values",1)?i.replace("{value}",e.slider("values",0)):m.replace("{min_range}",e.slider("values",0)).replace("{max_range}",e.slider("values",1))).replace("{field_label}",e.siblings(".um-slider-range").data("label")),t=e.slider("values",0),e.slider("values",1));e.siblings(".um-slider-range").html(a),e.siblings(".um_range_min").val(t),e.siblings(".um_range_max").val(r)}function um_get_search(e){return e.find(".um-search-line").length?e.find(".um-search-line").val():""}function um_get_sort(e){return e.data("sorting")}function um_get_current_page(e){e=e.data("page");return e=e&&void 0!==e?e:1}function um_time_convert(e,r){var t=Math.floor(e/60),e=e%60;return(t=60<=e&&(e=0,24<=(t+=1))?0:t)+":"+(e=e<10?"0"+e:e)}function um_ajax_get_members(u,e){var r,t,a,i,_,m=um_members_get_hash(u);wp.hooks.applyFilters("um_member_directory_get_members_allow",!0,m,u)?(r=um_get_current_page(u),t=um_get_search(u),a=um_get_sort(u),i=-(new Date).getTimezoneOffset()/60,_={directory_id:m,page:r,search:t,sorting:a,gmt_offset:i,post_refferer:u.data("base-post"),nonce:u.data("nonce")},u.find(".um-search-filter").length&&u.find(".um-search-filter").each(function(){var e,r,t,a,i,m,d,o=jQuery(this);o.find(".um-slider").length?(m=o.find(".um-slider").data("field_name"),r=um_get_data_for_directory(u,"filter_"+m+"_from"),e=um_get_data_for_directory(u,"filter_"+m+"_to"),void 0===r&&void 0===e||(_[m]=[r,e])):o.find(".um-datepicker-filter").length?(m=o.find(".um-datepicker-filter").data("filter_name"),r=um_get_data_for_directory(u,"filter_"+m+"_from"),e=um_get_data_for_directory(u,"filter_"+m+"_to"),void 0===r&&void 0===e||(_[m]=[r,e])):o.find(".um-timepicker-filter").length?(m=o.find(".um-timepicker-filter").data("filter_name"),r=um_get_data_for_directory(u,"filter_"+m+"_from"),e=um_get_data_for_directory(u,"filter_"+m+"_to"),void 0!==r&&(r=(i=(i=+(r=r.split(":"))[0])<10?"0"+i:i)+":"+(a=(a=+r[1])<10?"0"+a:a)+":00"),void 0!==e&&(a=+(t=e.split(":"))[1],e=(i=(i=+t[0])<10?"0"+i:i)+":"+(a=a<10?"0"+a:a)+":59"),void 0===r&&void 0===e||(_[m]=[r,e])):o.find("select").length?(m=o.find("select").attr("name"),void 0!==(d=um_get_data_for_directory(u,"filter_"+m))&&(d=UM.common.form.unsanitizeValue(d),_[m]=d.split("||"))):o.hasClass("um-text-filter-type")&&o.find('input[type="text"]').length?(m=o.find('input[type="text"]').attr("name"),void 0!==(d=um_get_data_for_directory(u,"filter_"+m))&&(d=UM.common.form.unsanitizeValue(d),_[m]=d)):_=wp.hooks.applyFilters("um_member_directory_custom_filter_handler",_,o,u)}),_=wp.hooks.applyFilters("um_member_directory_filter_request",_),wp.ajax.send("um_get_members",{data:_,success:function(e){um_member_directory_last_data[m]=e,um_build_template(u,e),u.find(".um-members-pagination-box").html(e.pagination),u.data("total_pages",e.total_pages),e.total_pages?(u.find(".um-member-directory-sorting-options").prop("disabled",!1),u.find(".um-member-directory-view-type").removeClass("um-disabled")):(u.find(".um-member-directory-sorting-options").prop("disabled",!0),u.find(".um-member-directory-view-type").addClass("um-disabled")),wp.hooks.doAction("um_member_directory_loaded",u,e),um_init_new_dropdown(),um_members_hide_preloader(u)},error:function(e){console.log(e),um_members_hide_preloader(u)}})):setTimeout(um_ajax_get_members,600,u,e)}function um_build_template(e,r){var t=e.data("view_type");jQuery(".um-"+um_members_get_hash(e)).length&&(e.find(".um-members-wrapper").html("").prepend(r["content_"+t]),""!==r.counter?e.find(".um-members-counter").text(r.counter).show():e.find(".um-members-counter").text(r.counter).hide(),e.addClass("um-loaded"),jQuery(document).trigger("um_build_template",[e,r]),jQuery(window).trigger("resize"),wp.hooks.doAction("um_member_directory_build_template",e),UM.common.tipsy.init())}function um_get_filters_data(u){var _=[];return u.find(".um-search-filter").each(function(){var d,t,a,i,e,r,m,o=jQuery(this);o.find("input.um-datepicker-filter").length?(d="datepicker",o.find("input.um-datepicker-filter").each(function(){var e,r,t,a,i,m;"to"!==jQuery(this).data("range")&&(e=jQuery(this).data("filter_name"),r=um_get_data_for_directory(u,"filter_"+e+"_from"),t=um_get_data_for_directory(u,"filter_"+e+"_to"),void 0!==r||void 0!==t)&&((a=jQuery(this).val())===(i=u.find('input.um-datepicker-filter[data-range="to"][data-filter_name="'+e+'"]').val())?m=i:""!==a&&""!==i?m=a+" - "+i:""===a?m="before "+i:""===i&&(m="since "+a),_.push({name:e,label:jQuery(this).data("filter-label"),value_label:m,value:[r,t],type:d}))})):o.find("input.um-timepicker-filter").length?(d="timepicker",o.find("input.um-timepicker-filter").each(function(){var e,r,t,a,i,m;"to"!==jQuery(this).data("range")&&(e=jQuery(this).data("filter_name"),r=um_get_data_for_directory(u,"filter_"+e+"_from"),t=um_get_data_for_directory(u,"filter_"+e+"_to"),void 0!==r||void 0!==t)&&((a=jQuery(this).val())===(i=u.find('input.um-timepicker-filter[data-range="to"][data-filter_name="'+e+'"]').val())?m=i:""!==a&&""!==i?m=a+" - "+i:""===a?m="before "+i:""===i&&(m="since "+a),_.push({name:e,label:jQuery(this).data("filter-label"),value_label:m,value:[r,t],type:d}))})):o.find("select").length?(d="select",t=o.find("select").attr("name"),a=o.find("select").data("placeholder"),i=void 0===(i=um_get_data_for_directory(u,"filter_"+t))?[]:(i=UM.common.form.unsanitizeValue(i)).split("||"),jQuery.each(i,function(e){var r=o.find('select option[value="'+i[e]+'"]').data("value_label");_.push({name:t,label:a,value_label:r,value:i[e],type:d})})):o.hasClass("um-text-filter-type")&&o.find('input[type="text"]').length?(d="text",t=o.find('input[type="text"]').attr("name"),a=o.find('input[type="text"]').attr("placeholder"),""!=(i=void 0===(i=um_get_data_for_directory(u,"filter_"+t))?"":i)&&_.push({name:t,label:a,value_label:i,value:i,type:d})):o.find("div.ui-slider").length?(d="slider",t=o.find("div.ui-slider").data("field_name"),e=um_get_data_for_directory(u,"filter_"+t+"_from"),r=um_get_data_for_directory(u,"filter_"+t+"_to"),void 0===e&&void 0===r||(m=(e===r?o.find("div.um-slider-range").data("placeholder-s").replace("{value}",e):o.find("div.um-slider-range").data("placeholder-p").replace("{min_range}",e).replace("{max_range}",r)).replace("{field_label}",o.find("div.um-slider-range").data("label")),a=o.find("div.um-slider-range").data("label"),_.push({name:t,label:a,value_label:m,value:[e,r],type:d}))):_=wp.hooks.applyFilters("um_member_directory_get_filter_data",_,u,o)}),_}function um_change_tag(e){var r,t=um_get_filters_data(e),a=(e.find(".um-members-filter-tag").remove(),e.find(".um-filtered-line"));a.length&&(r=wp.template("um-members-filtered-line"),a.prepend(r({filters:t})),0===e.find(".um-members-filter-remove").length?(e.find(".um-clear-filters").hide(),e.find(".um-clear-filters").parents(".um-member-directory-header-row").addClass("um-header-row-invisible")):(e.find(".um-clear-filters").show(),e.find(".um-clear-filters").parents(".um-member-directory-header-row").removeClass("um-header-row-invisible")))}function um_run_search(e){if(!um_is_directory_busy(e)){um_members_show_preloader(e);var r=um_get_data_for_directory(e,"search"),t=UM.common.form.sanitizeValue(e.find(".um-search-line").val());if(t===r||""===t&&void 0===r)um_members_hide_preloader(e);else{e.data("general_search",t),um_set_url_from_data(e,"search",t),e.data("page",1),um_set_url_from_data(e,"page","");if(!wp.hooks.applyFilters("um_member_directory_ignore_after_search",!1,e)){r=e.data("must-search");if(1===r&&(t=um_get_search(e),0===e.find(".um-members-filter-remove").length)&&!t)return e.data("searched",0),e.find(".um-members-grid, .um-members-list, .um-members-intro").remove(),e.find(".um-member-directory-sorting-options").prop("disabled",!0),e.find(".um-member-directory-view-type").addClass("um-disabled"),wp.hooks.doAction("um_member_directory_clear_not_searched",e),void um_members_hide_preloader(e)}e.data("searched",1),e.find(".um-member-directory-sorting-options").prop("disabled",!1),e.find(".um-member-directory-view-type").removeClass("um-disabled"),um_ajax_get_members(e)}}}function um_slider_filter_init(e){e.find(".um-slider").each(function(){var e=jQuery(this),t=e.parents(".um-directory"),a=e.data("field_name"),r=um_get_data_for_directory(t,"filter_"+a+"_from"),i=um_get_data_for_directory(t,"filter_"+a+"_to"),r=[r=void 0===r?parseInt(e.data("min")):r,i=void 0===i?parseInt(e.data("max")):i];e.slider({range:!0,min:parseInt(e.data("min")),max:parseInt(e.data("max")),values:r,create:function(e,r){},step:1,slide:function(e,r){um_set_range_label(jQuery(this),r)},stop:function(e,r){um_is_directory_busy(t)||(um_members_show_preloader(t),um_set_url_from_data(t,"filter_"+a+"_from",r.values[0]),um_set_url_from_data(t,"filter_"+a+"_to",r.values[1]),t.data("page",1),um_set_url_from_data(t,"page",""),um_ajax_get_members(t),um_change_tag(t),t.data("searched",1),t.find(".um-member-directory-sorting-options").prop("disabled",!1),t.find(".um-member-directory-view-type").removeClass("um-disabled"))}}),um_set_range_label(e)})}function um_datepicker_filter_init(e){e.find(".um-datepicker-filter").each(function(){var d=jQuery(this),o=new Date(1e3*d.data("date_min")),u=new Date(1e3*d.data("date_max")),e=d.pickadate({selectYears:!0,min:o,max:u,formatSubmit:"yyyy/mm/dd",hiddenName:!0,onOpen:function(){d.blur()},onClose:function(){d.blur()},onSet:function(e){var r,t,a,i,m;!e.select||um_is_directory_busy(r=d.parents(".um-directory"))||(um_members_show_preloader(r),t=d.data("filter_name"),a=d.data("range"),i=um_get_data_for_directory(r,"filter_"+t+"_from"),m=um_get_data_for_directory(r,"filter_"+t+"_to"),void 0===i&&(i=o/1e3),void 0===m&&(m=u/1e3),e=e.select/1e3,d.val(),"from"===a?i=e:"to"===a&&(m=e),um_set_url_from_data(r,"filter_"+t+"_from",i),um_set_url_from_data(r,"filter_"+t+"_to",m),r.data("page",1),um_set_url_from_data(r,"page",""),um_ajax_get_members(r),um_change_tag(r),r.data("searched",1),r.find(".um-member-directory-sorting-options").prop("disabled",!1),r.find(".um-member-directory-view-type").removeClass("um-disabled"))}}).pickadate("picker"),r=d.data("filter_name"),t=d.data("range"),r=um_get_data_for_directory(d.parents(".um-directory"),"filter_"+r+"_"+t);void 0!==r&&e.set("select",1e3*r)})}function um_timepicker_filter_init(e){e.find(".um-timepicker-filter").each(function(){var d=jQuery(this),o=d.attr("id"),u=d.data("filter_name"),_=d.attr("data-min"),s=d.attr("data-max"),e=_.split(":"),r=s.split(":"),e=d.pickatime({format:d.data("format"),interval:parseInt(d.data("intervals")),min:[e[0],e[1]],max:[r[0],r[1]],formatSubmit:"HH:i",hiddenName:!0,onOpen:function(){d.blur()},onClose:function(){d.blur()},onSet:function(e){var r,t,a,i,m;!e.select||um_is_directory_busy(r=d.parents(".um-directory"))||(um_members_show_preloader(r),t=d.data("filter_name"),a=d.data("range"),i=um_get_data_for_directory(r,"filter_"+t+"_from"),m=um_get_data_for_directory(r,"filter_"+t+"_to"),void 0===i&&(i=_),void 0===m&&(m=s),void 0!==e.select?(e=um_time_convert(e.select,a),"from"===a?i=e:"to"===a&&(m=e)):"from"===a?i=_:"to"===a&&(m=s),e=jQuery("#"+o).val(),"from"===d.data("range")?jQuery("#"+u+"_to").pickatime("picker").set("min",e):jQuery("#"+u+"_from").pickatime("picker").set("max",e),um_set_url_from_data(r,"filter_"+t+"_from",i),um_set_url_from_data(r,"filter_"+t+"_to",m),r.data("page",1),um_set_url_from_data(r,"page",""),um_ajax_get_members(r),um_change_tag(r),r.data("searched",1),r.find(".um-member-directory-sorting-options").prop("disabled",!1),r.find(".um-member-directory-view-type").removeClass("um-disabled"))}}).pickatime("picker"),r=d.data("filter_name"),t=d.data("range"),r=um_get_data_for_directory(d.parents(".um-directory"),"filter_"+r+"_"+t);void 0!==r&&(t=r.split(":"),e.set("select",60*t[0]+ +t[1]))})}jQuery(document.body).ready(function(){jQuery(document.body).on("click",".um-directory .um-member-view-switcher:not(.um-disabled) .um-button-in-group:not(.current)",function(){var e=jQuery(this),r=e.parents(".um-directory");if(um_is_directory_busy(r))return!1;um_members_show_preloader(r);var t,a=um_member_directory_last_data[um_members_get_hash(r)];null!==a&&(t=e.parents(".um-member-view-switcher").find(".um-button-in-group.current").data("type"),r.find(".um-members-wrapper.um-members-"+t).removeClass("um-members-"+t),e.parents(".um-member-view-switcher").find(".um-button-in-group").removeClass("current"),e.addClass("current"),t=e.data("type"),e=e.data("default"),r.find(".um-members-wrapper").addClass("um-members-"+t),um_set_url_from_data(r,"view_type",e?"":t),r.data("view_type",t),um_build_template(r,a),um_init_new_dropdown()),um_members_hide_preloader(r)}),jQuery(document.body).on("click",".um-directory .um-do-search",function(){um_run_search(jQuery(this).parents(".um-directory"))}),jQuery(document.body).on("keypress",".um-directory .um-search-line",function(e){13===e.which&&um_run_search(jQuery(this).parents(".um-directory"))}),jQuery(document.body).on("click",".um-members-sorting",function(e){var r,t,a;e.preventDefault(),1===jQuery(this).data("selected")||(e=jQuery(this).data("directory-hash"),um_is_directory_busy(e=jQuery('.um-directory[data-hash="'+e+'"]')))||(um_members_show_preloader(e),r=jQuery(this).text(),t=jQuery(this).data("value"),a=jQuery(this).data("default"),e.data("sorting",t),um_set_url_from_data(e,"sort",a?"":t),um_ajax_get_members(e),e.find('.um-dropdown[data-element=".um-members-sorting-toggle"]').find("a").data("selected",0).prop("data-selected",0).attr("data-selected",0),e.find('.um-dropdown[data-element=".um-members-sorting-toggle"] a[data-value="'+t+'"]').data("selected",1).prop("data-selected",1).attr("data-selected",1),e.find(".um-members-sorting-toggle .um-button-content").text(r))}),jQuery(document.body).on("click",".um-directory .um-pagination-item:not(.current)",function(){if(!jQuery(this).hasClass("disabled")){var r=jQuery(this).parents(".um-directory");if(!um_is_directory_busy(r)){um_members_show_preloader(r);let e;(1===(e="first"===jQuery(this).data("page")?1:"prev"===jQuery(this).data("page")?+r.data("page")-1:"next"===jQuery(this).data("page")?+r.data("page")+1:"last"===jQuery(this).data("page")?parseInt(r.data("total_pages")):parseInt(jQuery(this).data("page")))?(r.find('.um-pagination-item[data-page="prev"]').addClass("disabled"),r.find('.um-pagination-item[data-page="next"]')):e===parseInt(r.data("total_pages"))?(r.find('.um-pagination-item[data-page="next"]').addClass("disabled"),r.find('.um-pagination-item[data-page="prev"]')):r.find('.um-pagination-item[data-page="prev"], .um-pagination-item[data-page="next"]')).removeClass("disabled"),r.find(".um-pagination-item").removeClass("current"),r.find('.um-pagination-item[data-page="'+e+'"]').addClass("current"),r.data("page",e),1===e?um_set_url_from_data(r,"page",""):um_set_url_from_data(r,"page",e),um_ajax_get_members(r)}}}),jQuery(document.body).on("change",".um-directory .um-pagination-current-page-input",function(){if(!jQuery(this).hasClass("disabled")){var r=jQuery(this).parents(".um-directory");if(!um_is_directory_busy(r)){var t=parseInt(r.data("page"));let e=parseInt(jQuery(this).val());var a=parseInt(r.data("total_pages"));t!==e&&(e<1&&(jQuery(this).val(1),e=1),e>a&&(jQuery(this).val(a),e=a),um_members_show_preloader(r),(1===e?(r.find('.um-pagination-item[data-page="prev"]').addClass("disabled"),r.find('.um-pagination-item[data-page="next"]')):e===a?(r.find('.um-pagination-item[data-page="next"]').addClass("disabled"),r.find('.um-pagination-item[data-page="prev"]')):r.find('.um-pagination-item[data-page="prev"], .um-pagination-item[data-page="next"]')).removeClass("disabled"),r.data("page",e),1===e?um_set_url_from_data(r,"page",""):um_set_url_from_data(r,"page",e),um_ajax_get_members(r))}}}),jQuery(document.body).on("keypress",".um-directory .um-pagination-current-page-input",function(e){if(13===e.which)return jQuery(this).trigger("change"),!1}),jQuery(document.body).on("click",".um-member .um-meta-toggle",function(e){e.preventDefault();var e=jQuery(this).parents(".um-member"),r=jQuery(this).data("toggle-text"),t=jQuery(this).text();return e.find(".um-member-meta").toggleClass("um-member-meta-visible"),jQuery(this).data("toggle-text",t).text(r),!1});let a=!1;jQuery(document.body).on("click",".um-filters-toggle",function(e){e.preventDefault();e=jQuery(this);if(!a){a=!0;let r=jQuery(this).parents(".um-directory").find(".um-member-directory-filters-bar");r.toggleClass("um-header-row-invisible"),e.toggleClass("um-filters-shown");function t(e){r.find(".um-filters-inner").toggleClass("um-filters-inner-visible"),e||(a=!1)}return r.hasClass("um-header-row-invisible")?(t(!0),setTimeout(function(){a=!1},500)):setTimeout(t,500),!1}}),jQuery(document.body).on("change",".um-directory .um-search-filter select",function(){var r=jQuery(this).val(),t=[];for(let e=0;e<r.length;e++)t[e]=UM.common.form.sanitizeValue(r[e]);var e=jQuery(this).parents(".um-directory"),a=(UM.frontend.directories.getHash(e),e.find(".um-member-directory-filters-bar")),i=jQuery(this).prop("name"),m=void 0===(m=um_get_data_for_directory(e,"filter_"+i))?[]:m.split("||");t.length?(um_set_url_from_data(e,"filter_"+i,t.join("||")),a.find(".um-clear-filters-a").removeClass("um-visibility-hidden"),e.data("searched",1),e.find(".um-member-directory-sorting-options").prop("disabled",!1),e.find(".um-member-directory-view-type").removeClass("um-disabled")):um_set_url_from_data(e,"filter_"+i,""),e.data("page",1),um_set_url_from_data(e,"page",""),um_ajax_get_members(e)}),jQuery(document.body).on("blur",'.um-directory .um-search-filter.um-text-filter-type input[type="text"]',function(){var e,r,t,a=jQuery(this).parents(".um-directory");um_is_directory_busy(a)||(e=UM.common.form.sanitizeValue(jQuery(this).val()))!==(t=void 0===(t=um_get_data_for_directory(a,"filter_"+(r=jQuery(this).prop("name"))))?"":t)&&(um_members_show_preloader(a),um_set_url_from_data(a,"filter_"+r,e),a.data("page",1),um_set_url_from_data(a,"page",""),um_ajax_get_members(a),um_change_tag(a),a.data("searched",1),a.find(".um-member-directory-sorting-options").prop("disabled",!1),a.find(".um-member-directory-view-type").removeClass("um-disabled"),console.log(e),console.log(typeof e),t=a.find(".um-member-directory-filters-bar"),""!==e)&&t.find(".um-clear-filters-a").removeClass("um-visibility-hidden")}),jQuery(document.body).on("keypress",'.um-directory .um-search-filter.um-text-filter-type input[type="text"]',function(e){var r,t,a;13!==e.which||um_is_directory_busy(e=jQuery(this).parents(".um-directory"))||(r=UM.common.form.sanitizeValue(jQuery(this).val()))!==(a=void 0===(a=um_get_data_for_directory(e,"filter_"+(t=jQuery(this).prop("name"))))?"":a)&&(um_members_show_preloader(e),um_set_url_from_data(e,"filter_"+t,r),e.data("page",1),um_set_url_from_data(e,"page",""),um_ajax_get_members(e),um_change_tag(e),e.data("searched",1),e.find(".um-member-directory-sorting-options").prop("disabled",!1),e.find(".um-member-directory-view-type").removeClass("um-disabled"),a=e.find(".um-member-directory-filters-bar"),""!==r)&&a.find(".um-clear-filters-a").removeClass("um-visibility-hidden")}),jQuery(document.body).on("click",".um-directory .um-clear-filters-a",function(){var m=jQuery(this).parents(".um-directory");if(!um_is_directory_busy(m)){um_members_show_preloader(m),jQuery(this).addClass("um-visibility-hidden");m.find(".um-member-directory-filters-bar").find(".um-search-filter").each(function(){let e="text";jQuery(this).hasClass("um-select-filter-type")?e="select":jQuery(this).hasClass("um-slider-filter-type")?e="slider":jQuery(this).hasClass("um-datepicker-filter-type")?e="datepicker":jQuery(this).hasClass("um-timepicker-filter-type")&&(e="timepicker");var r,t,a=jQuery(this).data("filter-name");"text"===e?(um_set_url_from_data(m,"filter_"+a,""),jQuery('.um-search-filter input[name="'+a+'"]').val("")):"slider"===e?(um_set_url_from_data(m,"filter_"+a+"_from",""),um_set_url_from_data(m,"filter_"+a+"_to",""),t=(r=jQuery(".um-search-filter #"+a+"_min").siblings(".um-slider")).slider("option"),r.slider("values",[t.min,t.max]),jQuery(".um-search-filter #"+a+"_min").val(""),jQuery(".um-search-filter #"+a+"_max").val(""),um_set_range_label(r)):"datepicker"===e||"timepicker"===e?(um_set_url_from_data(m,"filter_"+a+"_from",""),um_set_url_from_data(m,"filter_"+a+"_to",""),jQuery(".um-search-filter #"+a+"_from").val(""),jQuery(".um-search-filter #"+a+"_to").val("")):wp.hooks.doAction("um_member_directory_clear_filters",e,m,a)}),m.find(".um-members-filter-remove").each(function(){var e,r,t=jQuery(this).data("value"),a=jQuery(this).data("name"),i=jQuery(this).data("type");"text"===i?(um_set_url_from_data(m,"filter_"+a,""),jQuery('.um-search-filter input[name="'+a+'"]').val("")):"select"===i?(e=void 0===(e=um_get_data_for_directory(m,"filter_"+a))?[]:(e=UM.common.form.unsanitizeValue(e)).split("||"),(e=-1!==jQuery.inArray(t.toString(),e)?jQuery.grep(e,function(e){return e!==t.toString()}):e).length||(e=""),um_set_url_from_data(m,"filter_"+a,e),(e=jQuery('.um-search-filter select[name="'+a+'"]')).find('option[value="'+t+'"]').prop("disabled",!1).show(),1<e.find("option:not(:disabled)").length&&e.prop("disabled",!1),0<m.find('.um-search-filter select[data-um-parent="'+a+'"]').length&&e.trigger("change")):"slider"===i?(um_set_url_from_data(m,"filter_"+a+"_from",""),um_set_url_from_data(m,"filter_"+a+"_to",""),r=(e=jQuery(".um-search-filter #"+a+"_min").siblings(".um-slider")).slider("option"),e.slider("values",[r.min,r.max]),jQuery(".um-search-filter #"+a+"_min").val(""),jQuery(".um-search-filter #"+a+"_max").val(""),um_set_range_label(e)):"datepicker"===i||"timepicker"===i?(um_set_url_from_data(m,"filter_"+a+"_from",""),um_set_url_from_data(m,"filter_"+a+"_to",""),jQuery(".um-search-filter #"+a+"_from").val(""),jQuery(".um-search-filter #"+a+"_to").val("")):wp.hooks.doAction("um_member_directory_clear_filters",i,m,a,t)}),m.data("page",1),um_set_url_from_data(m,"page",""),m.find(".um-members-filter-tag").remove(),0===m.find(".um-members-filter-remove").length?(m.find(".um-clear-filters").hide(),m.find(".um-clear-filters").parents(".um-member-directory-header-row").addClass("um-header-row-invisible")):(m.find(".um-clear-filters").show(),m.find(".um-clear-filters").parents(".um-member-directory-header-row").removeClass("um-header-row-invisible"));if(!wp.hooks.applyFilters("um_member_directory_ignore_after_search",!1,m)){var e=m.data("must-search");if(1===e)if(!um_get_search(m))return m.data("searched",0),m.find(".um-members-grid, .um-members-list, .um-members-intro").remove(),m.find(".um-member-directory-sorting-options").prop("disabled",!0),m.find(".um-member-directory-view-type").addClass("um-disabled"),wp.hooks.doAction("um_member_directory_clear_not_searched",m),void um_members_hide_preloader(m)}m.find(".um-member-directory-sorting-options").prop("disabled",!1),m.find(".um-member-directory-view-type").removeClass("um-disabled"),um_ajax_get_members(m)}}),wp.hooks.doAction("um_member_directory_on_first_pages_loading"),jQuery(".um-directory").each(function(){var e=jQuery(this),r=UM.frontend.directories.getHash(e),t=new UM.frontend.directory(r),t=(UM.frontend.directories.list[r]=t,um_slider_filter_init(e),um_datepicker_filter_init(e),um_timepicker_filter_init(e),wp.hooks.doAction("um_member_directory_on_init",e,r),wp.hooks.applyFilters("um_member_directory_ignore_after_search",!1,e));if(!t&&1===e.data("must-search")){t=um_get_search(e);if(!um_get_filters_data(e).length&&!t)return}wp.hooks.applyFilters("um_member_directory_prevent_default_first_loading",!1,e,r)||(um_members_show_preloader(e),um_ajax_get_members(e,{first_load:!0}),um_change_tag(e))}),window.addEventListener("popstate",function(e){jQuery(".um-directory").each(function(){let a=jQuery(this);var e,r=UM.frontend.directories.getHash(a),t=new UM.frontend.directory(r),t=((UM.frontend.directories.list[r]=t).preloaderShow(),a.find(".um-members-grid, .um-members-list, .um-members-intro").remove(),a.find(".um-member-directory-search-line").length&&(void 0===(i=um_get_data_for_directory(a,"search"))&&(i=""),a.data("general_search",i),a.find(".um-search-line").val(i)),um_get_data_for_directory(a,"page")),t=(void 0===t?t=1:t>a.data("total_pages")&&(t=a.data("total_pages")),a.data("page",t).attr("data-page",t),a.find(".um-member-directory-sorting").length&&(void 0===(t=um_get_data_for_directory(a,"sort"))&&(t=a.find('.um-new-dropdown[data-element=".um-member-directory-sorting-a"]').find('a[data-default="1"]').data("value")),a.data("sorting",t),(e=a.find('.um-new-dropdown[data-element=".um-member-directory-sorting-a"]')).find("a").data("selected",0).prop("data-selected",0).attr("data-selected",0),e.find('a[data-value="'+t+'"]').data("selected",1).prop("data-selected",1).attr("data-selected",1),a.find(".um-member-directory-sorting-a").find("> a").html(e.find('a[data-value="'+t+'"]').html())),a.find(".um-member-directory-view-type").length&&(void 0===(e=um_get_data_for_directory(a,"view_type"))&&(e=a.find('.um-member-directory-view-type-a[data-default="1"]').data("type")),a.data("view_type",e),a.find(".um-member-directory-view-type .um-member-directory-view-type-a").hide(),a.find('.um-member-directory-view-type .um-member-directory-view-type-a[data-type="'+e+'"]').show()),a.find(".um-datepicker-filter").each(function(){var e=jQuery(this),r=e.pickadate("picker"),t=e.data("filter_name"),e=e.data("range"),t=um_get_data_for_directory(a,"filter_"+t+"_"+e);void 0!==t?r.set("select",1e3*t):r.clear()}),a.find(".um-slider").each(function(){var e=jQuery(this),r=e.data("field_name"),t=um_get_data_for_directory(a,"filter_"+r+"_from"),r=um_get_data_for_directory(a,"filter_"+r+"_to");void 0===t&&(t=e.data("min")),t=parseInt(t),void 0===r&&(r=e.data("max")),r=parseInt(r),e.slider("values",[t,r]),um_set_range_label(e)}),a.find(".um-timepicker-filter").each(function(){var e=jQuery(this),r=e.pickatime("picker"),t=e.data("filter_name"),e=e.data("range"),t=um_get_data_for_directory(a,"filter_"+t+"_"+e);void 0!==t?(e=t.split(":"),r.set("select",60*e[0])):r.clear()}),wp.hooks.applyFilters("um_member_directory_ignore_after_search",!1,a));if(!t&&1===a.data("must-search")){var i=um_get_search(a);if(!um_get_filters_data(a).length&&!i)return a.data("searched",0),void um_members_hide_preloader(a);a.data("searched",1)}wp.hooks.applyFilters("um_member_directory_prevent_default_first_loading",!1,a,r)||(um_ajax_get_members(a),um_change_tag(a))})})});
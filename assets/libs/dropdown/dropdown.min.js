function um_init_new_dropdown(){jQuery(".um-new-dropdown").um_dropdownMenu()}!function(t){function o(e){var p={get:function(){return p},show:function(){return p.hideAll(),p.$menu=p.$element.find(".um-new-dropdown"),p.$menu.length||(p.$menu=t('div.um-new-dropdown[data-element="'+p.data.element+'"]:not([data-cloned="1"])').first()),p.$dropdown=p.$menu.clone(),p.$dropdown.on("click","li a",p.itemHandler).attr("data-cloned","1"),t(window).on("resize",p.updatePosition),(""!==p.data.parent?p.$menu.parents(p.data.parent):t(document.body)).append(p.$dropdown),p.$element.trigger("um_new_dropdown_render",{dropdown_layout:p.$dropdown,trigger:p.data.trigger,element:p.data.elemen,obj:p.$element}),wp.hooks.doAction("um_dropdown_render",p.$dropdown,p.data.trigger,p.data.elemen,p.$element),p.$dropdown.css(p.calculatePosition()).show(),p.$element.addClass("um-new-dropdown-shown").data("um-new-dropdown-show",!0),p},hide:function(){return p.$dropdown&&p.$dropdown.is(":visible")&&(t(window).off("resize",p.updatePosition),p.$dropdown.remove(),p.$element.removeClass("um-new-dropdown-shown").data("um-new-dropdown-show",!1)),p},hideAll:function(){return p.$element.data("um-new-dropdown-show")&&p.hide(),t('div.um-new-dropdown[data-cloned="1"]').remove(),t(".um-new-dropdown-shown").removeClass("um-new-dropdown-shown").data("um-new-dropdown-show",!1),p},calculatePosition:function(){var e,t,n,o=p.$element.get(0).getBoundingClientRect(),d=p.$dropdown.innerHeight()||150,r=p.data.width||150,a=p.data.place||"",i={position:"absolute",width:r+"px"};switch(e=""!==p.data.parent?(t=p.$menu.parents(p.data.parent).offset(),{top:(e=p.$element.offset()).top-t.top,left:e.left-t.left}):p.$element.offset(),""===a?(t=window.innerWidth,n=window.innerHeight,""!==p.data.parent&&(t=p.$menu.parents(p.data.parent)[0].offsetWidth,n=p.$menu.parents(p.data.parent)[0].offsetHeight),n-o.bottom>d?(i.top=e.top+o.height+"px",a+="bottom"):(a+="top",i.top=e.top-d+"px"),e.left>r||e.left>t/2?(i.left=e.left+o.width-r+"px",a+="-left"):(i.left=e.left+"px",a+="-right")):("bottom"===(n=a.split("-"))[0]?i.top=e.top+o.height+"px":"top"===n[0]&&(i.top=e.top-d+"px"),"left"===n[1]?i.left=e.left+o.width-r+"px":"right"===n[1]&&(i.left=e.left+"px")),a){case"bottom-right":i.borderRadius="0 5px 5px 5px";break;case"bottom-left":i.borderRadius="5px 0 5px 5px";break;case"top-right":i.borderRadius="5px 5px 5px 0";break;case"top-left":i.borderRadius="5px 5px 0 5px"}return i},updatePosition:function(){return p.$dropdown&&p.$dropdown.is(":visible")&&p.$dropdown.css(p.calculatePosition()),p},itemHandler:function(e){e.stopPropagation();e=t(e.currentTarget).attr("class");p.$menu.find('li a[class="'+e+'"]').trigger("click"),p.$element.data("um-new-dropdown-show")&&p.hide()},triggerHandler:function(e){e.stopPropagation(),p.$element=t(e.currentTarget),p.$element.data("um-new-dropdown-show")?p.hide():p.show()}};return p.$menu=t(e),p.data=p.$menu.data(),p.$element=p.$menu.closest(p.data.element),p.$element.length||(p.$element=t(p.data.element).first()),p.$dropdown=t(document.body).children('div[data-element="'+p.data.element+'"]:not([data-cloned="1"])'),void 0===p.data.initted&&(p.$menu.data("initted",!0),p.data=p.$menu.data(),void 0===o.screenTriggers&&(o.screenTriggers={}),o.screenTriggers[p.data.element]!==p.data.trigger)&&(o.screenTriggers[p.data.element]=p.data.trigger,t(document.body).on(p.data.trigger,p.data.element,p.triggerHandler)),void 0===o.globalHandlersInitted&&(o.globalHandlersInitted=!0,t(document.body).on("click",function(e){t(e.target).closest(".um-new-dropdown").length||p.hideAll()})),p}t.fn.um_dropdownMenu=function(n){return"string"==typeof n&&n?this.map(function(e,t){t=o(t);return"function"==typeof t[n]?t[n]():t[n]}).toArray():this.each(function(e,t){o(t)})}}(jQuery);
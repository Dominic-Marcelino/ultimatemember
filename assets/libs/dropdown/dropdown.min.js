function um_init_new_dropdown(){jQuery(".um-dropdown").um_dropdownMenu()}!function(t){function o(e){var l={get:function(){return l},show:function(){return l.hideAll(),l.$menu=l.$element.find(".um-dropdown"),l.$menu.length||(l.$menu=t('div.um-dropdown[data-element="'+l.data.element+'"]:not([data-cloned="1"])').first()),l.$dropdown=l.$menu.clone(),l.$dropdown.on("click","li a",l.itemHandler).attr("data-cloned","1"),t(window).on("resize",l.updatePosition),(""!==l.data.parent?l.$menu.parents(l.data.parent):t(document.body)).append(l.$dropdown),l.$element.trigger("um_new_dropdown_render",{dropdown_layout:l.$dropdown,trigger:l.data.trigger,element:l.data.elemen,obj:l.$element}),wp.hooks.doAction("um_dropdown_render",l.$dropdown,l.data.trigger,l.data.elemen,l.$element),l.$dropdown.css(l.calculatePosition()).show(),l.$element.addClass("um-dropdown-shown").data("um-dropdown-show",!0),l},hide:function(){return l.$dropdown&&l.$dropdown.is(":visible")&&(t(window).off("resize",l.updatePosition),l.$dropdown.remove(),l.$element.removeClass("um-dropdown-shown").data("um-dropdown-show",!1)),l},hideAll:function(){return l.$element.data("um-dropdown-show")&&l.hide(),t('div.um-dropdown[data-cloned="1"]').remove(),t(".um-dropdown-shown").removeClass("um-dropdown-shown").data("um-dropdown-show",!1),l},calculatePosition:function(){var e,t,n,o=l.$element.get(0).getBoundingClientRect(),d=l.$dropdown.innerHeight()||150,r=l.data.width||150,a=l.data.place||"",i={position:"absolute",width:r+"px"};return e=""!==l.data.parent?(t=l.$menu.parents(l.data.parent).offset(),{top:(e=l.$element.offset()).top-t.top,left:e.left-t.left}):l.$element.offset(),""===a?(t=window.innerWidth,n=window.innerHeight,""!==l.data.parent&&(t=l.$menu.parents(l.data.parent)[0].offsetWidth,n=l.$menu.parents(l.data.parent)[0].offsetHeight),n-o.bottom>d?(i.top=e.top+o.height+"px",a+="bottom"):(a+="top",i.top=e.top-d+"px"),e.left>r||e.left>t/2?(i.left=e.left+o.width-r+"px",a+="-left"):(i.left=e.left+"px",a+="-right")):("bottom"===(n=a.split("-"))[0]?i.top=e.top+o.height+"px":"top"===n[0]&&(i.top=e.top-d+"px"),"left"===n[1]?i.left=e.left+o.width-r+"px":"right"===n[1]&&(i.left=e.left+"px")),i},updatePosition:function(){return l.$dropdown&&l.$dropdown.is(":visible")&&l.$dropdown.css(l.calculatePosition()),l},itemHandler:function(e){e.stopPropagation();e=t(e.currentTarget).attr("class");l.$menu.find('li a[class="'+e+'"]').trigger("click"),l.$element.data("um-dropdown-show")&&l.hide()},triggerHandler:function(e){e.stopPropagation(),l.$element=t(e.currentTarget),l.$element.data("um-dropdown-show")?l.hide():l.show()}};return l.$menu=t(e),l.data=l.$menu.data(),l.$element=l.$menu.closest(l.data.element),l.$element.length||(l.$element=t(l.data.element).first()),l.$dropdown=t(document.body).children('div[data-element="'+l.data.element+'"]:not([data-cloned="1"])'),void 0===l.data.initted&&(l.$menu.data("initted",!0),l.data=l.$menu.data(),void 0===o.screenTriggers&&(o.screenTriggers={}),o.screenTriggers[l.data.element]!==l.data.trigger)&&(o.screenTriggers[l.data.element]=l.data.trigger,t(document.body).on(l.data.trigger,l.data.element,l.triggerHandler)),void 0===o.globalHandlersInitted&&(o.globalHandlersInitted=!0,t(document.body).on("click",function(e){t(e.target).closest(".um-dropdown").length||l.hideAll()})),l}t.fn.um_dropdownMenu=function(n){return"string"==typeof n&&n?this.map(function(e,t){t=o(t);return"function"==typeof t[n]?t[n]():t[n]}).toArray():this.each(function(e,t){o(t)})}}(jQuery);